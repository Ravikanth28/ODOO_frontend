(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[642],{6241:function(t,e,n){Promise.resolve().then(n.bind(n,3352))},3352:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return l}});var o=n(7437),a=n(9376),s=n(7648),r=n(2265),i=n(9116);let c=[{name:"Dashboard",path:"/dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6",roles:["ADMIN","INTERNAL_USER","PORTAL_USER"]},{name:"Contacts",path:"/contacts",icon:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z",roles:["ADMIN","INTERNAL_USER"]},{name:"Products",path:"/products",icon:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4",roles:["ADMIN","INTERNAL_USER"]},{name:"Subscriptions",path:"/subscriptions",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01",roles:["ADMIN","INTERNAL_USER","PORTAL_USER"]},{name:"Quotations",path:"/quotations",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",roles:["ADMIN","INTERNAL_USER"]},{name:"Invoices",path:"/invoices",icon:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2z",roles:["ADMIN","INTERNAL_USER","PORTAL_USER"]},{name:"Payments",path:"/payments",icon:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z",roles:["ADMIN","INTERNAL_USER","PORTAL_USER"]},{name:"Reports",path:"/reports",icon:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z",roles:["ADMIN","INTERNAL_USER","PORTAL_USER"]}],d=[{name:"Recurring Plans",path:"/plans",icon:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15",roles:["ADMIN","INTERNAL_USER"]},{name:"Attributes",path:"/attributes",icon:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z",roles:["ADMIN","INTERNAL_USER"]},{name:"Discounts",path:"/discounts",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8V7m0 1v8m0 0v1",roles:["ADMIN"]},{name:"Taxes",path:"/taxes",icon:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z",roles:["ADMIN","INTERNAL_USER"]},{name:"Users",path:"/users",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z",roles:["ADMIN","INTERNAL_USER"]}];function l(t){var e;let{children:n}=t,l=(0,a.usePathname)(),u=(0,a.useRouter)(),[h,m]=(0,r.useState)(null),[p,g]=(0,r.useState)(!0),[f,b]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{let t=(0,i.PR)();t?"PORTAL_USER"===t.role?u.push("/portal/catalog"):m(t):u.push("/login")},[u]),(0,r.useEffect)(()=>{d.some(t=>l===t.path)&&b(!0)},[l]),!h)return(0,o.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#F0EEEF]",children:(0,o.jsx)("div",{className:"w-8 h-8 border-3 border-primary/30 border-t-primary rounded-full animate-spin"})});let y=c.filter(t=>t.roles.includes(h.role)),S=d.filter(t=>t.roles.includes(h.role)),N=[...c,...d];return(0,o.jsxs)("div",{className:"min-h-screen bg-[#F0EEEF]",children:[(0,o.jsxs)("aside",{className:"fixed top-0 left-0 h-full bg-primary text-white transition-all duration-200 z-50 ".concat(p?"w-56":"w-16"),children:[(0,o.jsxs)("div",{className:"h-14 flex items-center justify-between px-4 border-b border-white/15",children:[p&&(0,o.jsx)("span",{className:"text-base font-bold tracking-tight",children:"SIDAZ"}),(0,o.jsx)("button",{onClick:()=>g(!p),className:"p-1 hover:bg-white/10 rounded transition-colors",children:(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:p?"M11 19l-7-7 7-7m8 14l-7-7 7-7":"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),(0,o.jsxs)("nav",{className:"py-2 px-2 space-y-0.5 overflow-y-auto",style:{maxHeight:"calc(100vh - 120px)"},children:[y.map(t=>(0,o.jsxs)(s.default,{href:t.path,className:"flex items-center gap-3 px-3 py-2 rounded-md text-sm transition-colors ".concat(l===t.path||l.startsWith(t.path+"/")?"bg-white/20 text-white font-medium":"text-white/75 hover:bg-white/10 hover:text-white"),title:p?void 0:t.name,children:[(0,o.jsx)("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:t.icon})}),p&&(0,o.jsx)("span",{children:t.name})]},t.path)),S.length>0&&(0,o.jsxs)(o.Fragment,{children:[p&&(0,o.jsx)("div",{className:"pt-3 pb-1 px-3",children:(0,o.jsx)("div",{className:"border-t border-white/15"})}),(0,o.jsxs)("button",{onClick:()=>b(!f),className:"w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm transition-colors ".concat(d.some(t=>l===t.path)?"bg-white/10 text-white":"text-white/75 hover:bg-white/10 hover:text-white"),title:p?void 0:"Configuration",children:[(0,o.jsxs)("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.066 2.573c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.573 1.066c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.066-2.573c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),p&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"flex-1 text-left",children:"Configuration"}),(0,o.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(f?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),f&&p&&(0,o.jsx)("div",{className:"pl-4 space-y-0.5",children:S.map(t=>(0,o.jsxs)(s.default,{href:t.path,className:"flex items-center gap-3 px-3 py-1.5 rounded-md text-sm transition-colors ".concat(l===t.path?"bg-white/20 text-white font-medium":"text-white/60 hover:bg-white/10 hover:text-white"),children:[(0,o.jsx)("svg",{className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:t.icon})}),(0,o.jsx)("span",{children:t.name})]},t.path))})]})]}),(0,o.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-3 border-t border-white/15",children:[(0,o.jsxs)("div",{className:"flex items-center gap-2 ".concat(!p&&"justify-center"),children:[(0,o.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center text-white text-sm font-semibold flex-shrink-0",children:h.name.charAt(0).toUpperCase()}),p&&(0,o.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,o.jsx)("p",{className:"text-sm font-medium truncate",children:h.name}),(0,o.jsx)("p",{className:"text-xs text-white/60 truncate",children:h.role.replace(/_/g," ")})]})]}),p&&(0,o.jsxs)("button",{onClick:()=>{(0,i.gy)(),u.push("/login")},className:"mt-2 w-full px-3 py-1.5 text-xs text-white/80 hover:text-white hover:bg-white/10 rounded-md transition-colors text-left flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]}),(0,o.jsxs)("main",{className:"transition-all duration-200 ".concat(p?"ml-56":"ml-16"),children:[(0,o.jsxs)("header",{className:"h-14 bg-white border-b border-gray-200 px-6 flex items-center justify-between sticky top-0 z-40",children:[(0,o.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:(null===(e=N.find(t=>t.path===l))||void 0===e?void 0:e.name)||"Dashboard"}),(0,o.jsxs)("span",{className:"text-sm text-gray-500",children:["Welcome, ",(0,o.jsx)("span",{className:"font-medium text-gray-700",children:h.name})]})]}),(0,o.jsx)("div",{className:"p-6",children:n})]})]})}},9116:function(t,e,n){"use strict";n.d(e,{Co:function(){return u},F3:function(){return l},JG:function(){return E},PR:function(){return r},QB:function(){return g},QZ:function(){return x},TL:function(){return f},TV:function(){return h},_g:function(){return N},av:function(){return i},ax:function(){return S},g6:function(){return m},gy:function(){return s},h3:function(){return y},iV:function(){return p},kv:function(){return d},o4:function(){return a},rW:function(){return b},tQ:function(){return O},xf:function(){return v}});let o=()=>localStorage.getItem("token"),a=t=>{localStorage.setItem("token",t)},s=()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},r=()=>{{let t=localStorage.getItem("user");return t?JSON.parse(t):null}},i=t=>{localStorage.setItem("user",JSON.stringify(t))},c=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o(),a={"Content-Type":"application/json",...n&&{Authorization:"Bearer ".concat(n)},...e.headers},s=await fetch("".concat("http://localhost:5001/api").concat(t),{...e,headers:a});if(!s.ok)throw Error((await s.json().catch(()=>({error:"Request failed"}))).error||"Request failed");return s.json()},d={signup:t=>c("/auth/signup",{method:"POST",body:JSON.stringify(t)}),login:t=>c("/auth/login",{method:"POST",body:JSON.stringify(t)}),requestPasswordReset:t=>c("/auth/reset-password-request",{method:"POST",body:JSON.stringify({email:t})}),resetPassword:(t,e)=>c("/auth/reset-password",{method:"POST",body:JSON.stringify({token:t,newPassword:e})}),getCurrentUser:()=>c("/auth/me")},l={getAll:()=>c("/products"),getOne:t=>c("/products/".concat(t)),create:t=>c("/products",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/products/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/products/".concat(t),{method:"DELETE"}),addVariant:(t,e)=>c("/products/".concat(t,"/variants"),{method:"POST",body:JSON.stringify(e)}),getVariants:t=>c("/products/".concat(t,"/variants")),updateVariant:(t,e,n)=>c("/products/".concat(t,"/variants/").concat(e),{method:"PUT",body:JSON.stringify(n)}),deleteVariant:(t,e)=>c("/products/".concat(t,"/variants/").concat(e),{method:"DELETE"}),getAttributeLines:t=>c("/products/".concat(t,"/attributes")),addAttributeLine:(t,e)=>c("/products/".concat(t,"/attributes"),{method:"POST",body:JSON.stringify(e)}),deleteAttributeLine:(t,e)=>c("/products/".concat(t,"/attributes/").concat(e),{method:"DELETE"})},u={getAll:()=>c("/plans"),getOne:t=>c("/plans/".concat(t)),create:t=>c("/plans",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/plans/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/plans/".concat(t),{method:"DELETE"})},h={getAll:()=>c("/subscriptions"),getOne:t=>c("/subscriptions/".concat(t)),create:t=>c("/subscriptions",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/subscriptions/".concat(t),{method:"PUT",body:JSON.stringify(e)}),updateStatus:(t,e)=>c("/subscriptions/".concat(t,"/status"),{method:"PUT",body:JSON.stringify({status:e})}),addLine:(t,e)=>c("/subscriptions/".concat(t,"/lines"),{method:"POST",body:JSON.stringify(e)}),delete:t=>c("/subscriptions/".concat(t),{method:"DELETE"}),deleteLine:(t,e)=>c("/subscriptions/".concat(t,"/lines/").concat(e),{method:"DELETE"}),renew:t=>c("/subscriptions/".concat(t,"/renew"),{method:"POST"}),upsell:(t,e)=>c("/subscriptions/".concat(t,"/upsell"),{method:"POST",body:JSON.stringify({additionalLines:e})}),getHistory:t=>c("/subscriptions/".concat(t,"/history"))},m={getAll:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return e})).toString():"";return c("/invoices".concat(e))},getOne:t=>c("/invoices/".concat(t)),generate:(t,e)=>c("/invoices/generate/".concat(t),{method:"POST",body:e?JSON.stringify(e):void 0}),update:(t,e)=>c("/invoices/".concat(t),{method:"PUT",body:JSON.stringify(e)}),confirm:t=>c("/invoices/".concat(t,"/confirm"),{method:"PUT"}),cancel:t=>c("/invoices/".concat(t,"/cancel"),{method:"PUT"}),addLine:(t,e)=>c("/invoices/".concat(t,"/lines"),{method:"POST",body:JSON.stringify(e)}),deleteLine:(t,e)=>c("/invoices/".concat(t,"/lines/").concat(e),{method:"DELETE"})},p={getAll:()=>c("/payments"),getOne:t=>c("/payments/".concat(t)),create:t=>c("/payments",{method:"POST",body:JSON.stringify(t)})},g={getAll:()=>c("/taxes"),getOne:t=>c("/taxes/".concat(t)),create:t=>c("/taxes",{method:"POST",body:JSON.stringify(t)}),suggest:t=>c("/taxes/suggest",{method:"POST",body:JSON.stringify(t)}),calculate:t=>c("/taxes/calculate",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/taxes/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/taxes/".concat(t),{method:"DELETE"})},f={getAll:()=>c("/discounts"),getOne:t=>c("/discounts/".concat(t)),create:t=>c("/discounts",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/discounts/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/discounts/".concat(t),{method:"DELETE"})},b={getAll:()=>c("/quotations"),getOne:t=>c("/quotations/".concat(t)),create:t=>c("/quotations",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/quotations/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/quotations/".concat(t),{method:"DELETE"}),addLine:(t,e)=>c("/quotations/".concat(t,"/lines"),{method:"POST",body:JSON.stringify(e)}),updateLine:(t,e,n)=>c("/quotations/".concat(t,"/lines/").concat(e),{method:"PUT",body:JSON.stringify(n)}),deleteLine:(t,e)=>c("/quotations/".concat(t,"/lines/").concat(e),{method:"DELETE"}),createSubscription:(t,e)=>c("/quotations/".concat(t,"/create-subscription"),{method:"POST",body:JSON.stringify(e)})},y={getAll:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return e})).toString():"";return c("/users".concat(e))},getOne:t=>c("/users/".concat(t)),createInternal:t=>c("/users/internal",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/users/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/users/".concat(t),{method:"DELETE"}),changeRole:(t,e)=>c("/users/".concat(t,"/role"),{method:"PUT",body:JSON.stringify({role:e})})},S={getDashboard:()=>c("/reports/dashboard"),getSubscriptions:()=>c("/reports/subscriptions"),getRevenue:()=>c("/reports/revenue"),getPayments:()=>c("/reports/payments"),getOverdueInvoices:()=>c("/reports/overdue-invoices")},N={createOrder:t=>c("/razorpay/create-order",{method:"POST",body:JSON.stringify({subscriptionId:t})}),verifyPayment:t=>c("/razorpay/verify-payment",{method:"POST",body:JSON.stringify(t)})},x={getAll:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return void 0!==e})).toString():"";return c("/contacts".concat(e))},getOne:t=>c("/contacts/".concat(t)),create:t=>c("/contacts",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/contacts/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/contacts/".concat(t),{method:"DELETE"}),getChildren:t=>c("/contacts/".concat(t,"/children"))},v={getAll:()=>c("/attributes"),getOne:t=>c("/attributes/".concat(t)),create:t=>c("/attributes",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/attributes/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/attributes/".concat(t),{method:"DELETE"}),addValue:(t,e)=>c("/attributes/".concat(t,"/values"),{method:"POST",body:JSON.stringify(e)}),updateValue:(t,e,n)=>c("/attributes/".concat(t,"/values/").concat(e),{method:"PUT",body:JSON.stringify(n)}),deleteValue:(t,e)=>c("/attributes/".concat(t,"/values/").concat(e),{method:"DELETE"})},O={generateInvoice:t=>c("/pdf/invoice/".concat(t),{method:"POST"}),generateQuotation:t=>c("/pdf/quotation/".concat(t),{method:"POST"})},E={getDashboard:()=>c("/portal/dashboard"),getCatalog:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return e})).toString():"";return c("/portal/catalog".concat(e))},getSubscriptions:()=>c("/portal/subscriptions"),getSubscription:t=>c("/portal/subscriptions/".concat(t)),getInvoices:()=>c("/portal/invoices"),getInvoice:t=>c("/portal/invoices/".concat(t)),getPayments:()=>c("/portal/payments"),getProfile:()=>c("/portal/profile"),updateProfile:t=>c("/portal/profile",{method:"PUT",body:JSON.stringify(t)}),subscribe:t=>c("/portal/subscribe",{method:"POST",body:JSON.stringify({planId:t})})}},9376:function(t,e,n){"use strict";var o=n(5475);n.o(o,"useParams")&&n.d(e,{useParams:function(){return o.useParams}}),n.o(o,"usePathname")&&n.d(e,{usePathname:function(){return o.usePathname}}),n.o(o,"useRouter")&&n.d(e,{useRouter:function(){return o.useRouter}}),n.o(o,"useSearchParams")&&n.d(e,{useSearchParams:function(){return o.useSearchParams}})}},function(t){t.O(0,[648,971,117,744],function(){return t(t.s=6241)}),_N_E=t.O()}]);