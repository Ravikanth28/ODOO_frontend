(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[949],{9212:function(e,t,s){Promise.resolve().then(s.bind(s,7628))},7628:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var n=s(7437),a=s(2265),r=s(9376),i=s(9116),c=s(3745),o=s(6143),l=s(5838),d=s(4360);function m(){var e,t,s,m,u;let{id:x}=(0,r.useParams)(),h=(0,r.useRouter)(),{showToast:p}=(0,d.p)(),[f,g]=(0,a.useState)(null),[y,b]=(0,a.useState)(!0),[N,j]=(0,a.useState)(!1),[v,S]=(0,a.useState)(null),[O,P]=(0,a.useState)({amount:"",paymentMethod:"CREDIT_CARD",reference:"",notes:""}),[T,w]=(0,a.useState)(!1),[C,E]=(0,a.useState)(!1);(0,a.useEffect)(()=>{D()},[x]);let D=async()=>{try{let e=await i.g6.getOne(x);g(e)}catch(e){p(e.message||"Failed to load invoice","error")}finally{b(!1)}},L=async()=>{j(!0);try{await i.g6.confirm(x),p("Invoice confirmed","success"),S(null),D()}catch(e){p(e.message||"Failed to confirm invoice","error")}finally{j(!1)}},k=async()=>{j(!0);try{await i.g6.cancel(x),p("Invoice cancelled","success"),S(null),D()}catch(e){p(e.message||"Failed to cancel invoice","error")}finally{j(!1)}},J=async e=>{if(e.preventDefault(),!O.amount){p("Please enter an amount","error");return}w(!0);try{await i.iV.create({invoiceId:x,amount:parseFloat(O.amount),paymentMethod:O.paymentMethod,reference:O.reference||void 0,notes:O.notes||void 0}),p("Payment recorded","success"),P({amount:"",paymentMethod:"CREDIT_CARD",reference:"",notes:""}),D()}catch(e){p(e.message||"Failed to record payment","error")}finally{w(!1)}},A=async()=>{E(!0);try{let e=await i.tQ.generateInvoice(x);window.open(e.pdfUrl,"_blank"),p("PDF generated","success"),D()}catch(e){p(e.message||"Failed to generate PDF","error")}finally{E(!1)}};if(y)return(0,n.jsx)(o.Z,{message:"Loading invoice..."});if(!f)return(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("p",{className:"text-gray-500",children:"Invoice not found."}),(0,n.jsx)("button",{onClick:()=>h.back(),className:"btn-secondary mt-4",children:"Go Back"})]});let I=(null===(e=f.lines)||void 0===e?void 0:e.reduce((e,t)=>e+Number(t.unitPrice)*Number(t.quantity)-Number(t.discount||0),0))||0,R=(null===(t=f.lines)||void 0===t?void 0:t.reduce((e,t)=>e+Number(t.taxAmount||0),0))||0,F=Number(f.totalAmount)||0,U=Number(f.paidAmount)||0,M=F-U,_=f.dueDate&&new Date(f.dueDate)<new Date&&M>0&&"CANCELLED"!==f.status&&"PAID"!==f.status,q={CREDIT_CARD:"Credit Card",DEBIT_CARD:"Debit Card",BANK_TRANSFER:"Bank Transfer",UPI:"UPI",CASH:"Cash",OTHER:"Other"};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)("button",{onClick:()=>h.back(),className:"btn-secondary btn-sm",children:[(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,n.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:["Invoice ",f.invoiceNumber]}),(0,n.jsx)(c.Z,{status:f.status}),_&&(0,n.jsx)("span",{className:"badge bg-red-100 text-red-700",children:"OVERDUE"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsxs)("button",{onClick:A,disabled:C,className:"btn-secondary",children:[(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),C?"Generating...":"Download PDF"]}),"DRAFT"===f.status&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>S("confirm"),className:"btn-primary",disabled:N,children:"Confirm Invoice"}),(0,n.jsx)("button",{onClick:()=>S("cancel"),className:"btn-danger",disabled:N,children:"Cancel"})]}),"CONFIRMED"===f.status&&(0,n.jsx)("button",{onClick:()=>S("cancel"),className:"btn-danger",disabled:N,children:"Cancel Invoice"})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,n.jsxs)("div",{className:"card p-5",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-3",children:"Invoice Details"}),(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Number"}),(0,n.jsx)("span",{className:"font-mono font-medium",children:f.invoiceNumber})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Date"}),(0,n.jsx)("span",{children:new Date(f.invoiceDate).toLocaleDateString()})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Due Date"}),(0,n.jsx)("span",{className:_?"text-red-600 font-medium":"",children:f.dueDate?new Date(f.dueDate).toLocaleDateString():"-"})]}),f.subscription&&(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Subscription"}),(0,n.jsx)("span",{className:"font-mono text-xs",children:f.subscription.subscriptionNumber})]})]})]}),(0,n.jsxs)("div",{className:"card p-5",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-3",children:"Customer"}),(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Name"}),(0,n.jsx)("span",{className:"font-medium",children:(null===(s=f.customer)||void 0===s?void 0:s.name)||"-"})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Email"}),(0,n.jsx)("span",{children:(null===(m=f.customer)||void 0===m?void 0:m.email)||"-"})]}),f.contact&&(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Contact"}),(0,n.jsx)("span",{children:f.contact.name})]})]})]}),(0,n.jsxs)("div",{className:"card p-5",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-3",children:"Amounts"}),(0,n.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Subtotal"}),(0,n.jsxs)("span",{children:["₹",I.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Tax"}),(0,n.jsxs)("span",{children:["₹",R.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex justify-between font-semibold border-t pt-2",children:[(0,n.jsx)("span",{children:"Total"}),(0,n.jsxs)("span",{children:["₹",F.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex justify-between text-emerald-600",children:[(0,n.jsx)("span",{children:"Paid"}),(0,n.jsxs)("span",{children:["₹",U.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex justify-between font-bold border-t pt-2 ".concat(M>0?"text-red-600":"text-emerald-600"),children:[(0,n.jsx)("span",{children:"Balance Due"}),(0,n.jsxs)("span",{children:["₹",M.toFixed(2)]})]})]})]})]}),f.notes&&(0,n.jsxs)("div",{className:"card p-5",children:[(0,n.jsx)("h3",{className:"text-sm font-semibold text-gray-500 uppercase mb-2",children:"Notes"}),(0,n.jsx)("p",{className:"text-sm text-gray-700",children:f.notes})]}),(0,n.jsxs)("div",{className:"card p-5",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Line Items"}),(0,n.jsx)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"text-left px-4 py-2.5 font-medium text-gray-600",children:"Product"}),(0,n.jsx)("th",{className:"text-left px-4 py-2.5 font-medium text-gray-600",children:"Description"}),(0,n.jsx)("th",{className:"text-right px-4 py-2.5 font-medium text-gray-600",children:"Qty"}),(0,n.jsx)("th",{className:"text-right px-4 py-2.5 font-medium text-gray-600",children:"Unit Price"}),(0,n.jsx)("th",{className:"text-right px-4 py-2.5 font-medium text-gray-600",children:"Discount"}),(0,n.jsx)("th",{className:"text-right px-4 py-2.5 font-medium text-gray-600",children:"Tax"}),(0,n.jsx)("th",{className:"text-right px-4 py-2.5 font-medium text-gray-600",children:"Amount"})]})}),(0,n.jsxs)("tbody",{children:[null===(u=f.lines)||void 0===u?void 0:u.map(e=>{var t;return(0,n.jsxs)("tr",{className:"border-t border-gray-100",children:[(0,n.jsx)("td",{className:"px-4 py-2.5 font-medium text-gray-900",children:(null===(t=e.product)||void 0===t?void 0:t.name)||"-"}),(0,n.jsx)("td",{className:"px-4 py-2.5 text-gray-500",children:e.description||"-"}),(0,n.jsx)("td",{className:"px-4 py-2.5 text-right",children:e.quantity}),(0,n.jsxs)("td",{className:"px-4 py-2.5 text-right",children:["₹",Number(e.unitPrice).toFixed(2)]}),(0,n.jsx)("td",{className:"px-4 py-2.5 text-right",children:e.discount>0?"₹".concat(Number(e.discount).toFixed(2)):"-"}),(0,n.jsxs)("td",{className:"px-4 py-2.5 text-right",children:[e.tax?"".concat(e.tax.name," (").concat(e.tax.rate,"%)"):"-",e.taxAmount>0&&(0,n.jsxs)("span",{className:"block text-xs text-gray-400",children:["₹",Number(e.taxAmount).toFixed(2)]})]}),(0,n.jsxs)("td",{className:"px-4 py-2.5 text-right font-medium",children:["₹",Number(e.amount).toFixed(2)]})]},e.id)}),(!f.lines||0===f.lines.length)&&(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:7,className:"px-4 py-6 text-center text-gray-500",children:"No line items."})})]})]})}),(0,n.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200 flex justify-end",children:(0,n.jsxs)("div",{className:"w-72 space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Subtotal"}),(0,n.jsxs)("span",{className:"font-medium",children:["₹",I.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-500",children:"Tax"}),(0,n.jsxs)("span",{className:"font-medium",children:["₹",R.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm font-semibold border-t pt-2",children:[(0,n.jsx)("span",{children:"Total"}),(0,n.jsxs)("span",{children:["₹",F.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm text-emerald-600",children:[(0,n.jsx)("span",{children:"Paid"}),(0,n.jsxs)("span",{className:"font-medium",children:["₹",U.toFixed(2)]})]}),(0,n.jsxs)("div",{className:"flex justify-between text-base font-bold border-t pt-2 ".concat(M>0?"text-red-600":"text-emerald-600"),children:[(0,n.jsx)("span",{children:"Balance Due"}),(0,n.jsxs)("span",{children:["₹",M.toFixed(2)]})]})]})})]}),f.payments&&f.payments.length>0&&(0,n.jsxs)("div",{className:"card p-5",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Payment History"}),(0,n.jsx)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[(0,n.jsx)("thead",{className:"bg-gray-50",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"text-left px-4 py-2.5 font-medium text-gray-600",children:"Date"}),(0,n.jsx)("th",{className:"text-left px-4 py-2.5 font-medium text-gray-600",children:"Method"}),(0,n.jsx)("th",{className:"text-left px-4 py-2.5 font-medium text-gray-600",children:"Reference"}),(0,n.jsx)("th",{className:"text-right px-4 py-2.5 font-medium text-gray-600",children:"Amount"}),(0,n.jsx)("th",{className:"text-left px-4 py-2.5 font-medium text-gray-600",children:"Notes"})]})}),(0,n.jsx)("tbody",{children:f.payments.map(e=>(0,n.jsxs)("tr",{className:"border-t border-gray-100",children:[(0,n.jsx)("td",{className:"px-4 py-2.5",children:new Date(e.paymentDate).toLocaleDateString()}),(0,n.jsx)("td",{className:"px-4 py-2.5",children:q[e.paymentMethod]||e.paymentMethod}),(0,n.jsx)("td",{className:"px-4 py-2.5 font-mono text-xs",children:e.reference||"-"}),(0,n.jsxs)("td",{className:"px-4 py-2.5 text-right font-semibold text-emerald-600",children:["₹",Number(e.amount).toFixed(2)]}),(0,n.jsx)("td",{className:"px-4 py-2.5 text-gray-500",children:e.notes||"-"})]},e.id))})]})})]}),"CONFIRMED"===f.status&&M>0&&(0,n.jsxs)("div",{className:"card p-5",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Record Payment"}),(0,n.jsxs)("form",{onSubmit:J,className:"space-y-4",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:"Amount *"}),(0,n.jsx)("input",{type:"number",step:"0.01",max:M,value:O.amount,onChange:e=>P({...O,amount:e.target.value}),className:"form-input",placeholder:M.toFixed(2),required:!0})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:"Payment Method"}),(0,n.jsxs)("select",{value:O.paymentMethod,onChange:e=>P({...O,paymentMethod:e.target.value}),className:"form-select",children:[(0,n.jsx)("option",{value:"CREDIT_CARD",children:"Credit Card"}),(0,n.jsx)("option",{value:"DEBIT_CARD",children:"Debit Card"}),(0,n.jsx)("option",{value:"BANK_TRANSFER",children:"Bank Transfer"}),(0,n.jsx)("option",{value:"UPI",children:"UPI"}),(0,n.jsx)("option",{value:"CASH",children:"Cash"}),(0,n.jsx)("option",{value:"OTHER",children:"Other"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:"Reference"}),(0,n.jsx)("input",{type:"text",value:O.reference,onChange:e=>P({...O,reference:e.target.value}),className:"form-input",placeholder:"Transaction ref (optional)"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"form-label",children:"Notes"}),(0,n.jsx)("input",{type:"text",value:O.notes,onChange:e=>P({...O,notes:e.target.value}),className:"form-input",placeholder:"Notes (optional)"})]})]}),(0,n.jsx)("button",{type:"submit",disabled:T,className:"btn-primary",children:T?"Recording...":"Record Payment"})]})]}),(0,n.jsx)(l.Z,{isOpen:"confirm"===v,onConfirm:L,onCancel:()=>S(null),title:"Confirm Invoice",message:"Confirm this invoice? It will be marked as ready for payment.",confirmLabel:"Confirm",variant:"warning",loading:N}),(0,n.jsx)(l.Z,{isOpen:"cancel"===v,onConfirm:k,onCancel:()=>S(null),title:"Cancel Invoice",message:"Cancel this invoice? This cannot be undone.",confirmLabel:"Cancel Invoice",variant:"danger",loading:N})]})}},5838:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(7437);function a(e){let{isOpen:t,onConfirm:s,onCancel:a,title:r,message:i,confirmLabel:c="Confirm",variant:o="danger",loading:l=!1}=e;return t?(0,n.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,n.jsx)("div",{className:"fixed inset-0 bg-black/40",onClick:a}),(0,n.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-sm mx-4 p-6",children:[(0,n.jsxs)("div",{className:"flex items-start gap-4",children:[(0,n.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ".concat("danger"===o?"bg-red-100":"bg-yellow-100"),children:(0,n.jsx)("svg",{className:"w-5 h-5 ".concat("danger"===o?"text-red-600":"text-yellow-600"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:r}),(0,n.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:i})]})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,n.jsx)("button",{onClick:a,className:"btn-secondary",children:"Cancel"}),(0,n.jsx)("button",{onClick:s,disabled:l,className:"danger"===o?"btn-danger":"btn-primary",children:l?"Processing...":c})]})]})]}):null}},6143:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(7437);function a(e){let{message:t="Loading..."}=e;return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,n.jsx)("div",{className:"w-8 h-8 border-3 border-primary/30 border-t-primary rounded-full animate-spin"}),(0,n.jsx)("p",{className:"mt-3 text-sm text-gray-500",children:t})]})}},3745:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(7437);let a={DRAFT:"badge-draft",QUOTATION:"badge-quotation",CONFIRMED:"badge-confirmed",ACTIVE:"badge-active",PAID:"badge-paid",CLOSED:"badge-closed",CANCELLED:"badge-cancelled"};function r(e){let{status:t}=e,s=a[t]||"badge-draft";return(0,n.jsx)("span",{className:s,children:t.replace("_"," ")})}},4360:function(e,t,s){"use strict";s.d(t,{ToastProvider:function(){return o},p:function(){return i}});var n=s(7437),a=s(2265);let r=(0,a.createContext)({showToast:()=>{}}),i=()=>(0,a.useContext)(r),c=0;function o(e){let{children:t}=e,[s,i]=(0,a.useState)([]),o=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",s=++c;i(n=>[...n,{id:s,message:e,type:t}]),setTimeout(()=>{i(e=>e.filter(e=>e.id!==s))},4e3)},[]),l=e=>{i(t=>t.filter(t=>t.id!==e))},d={success:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z",error:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z",warning:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z",info:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},m={success:"bg-emerald-50 border-emerald-200 text-emerald-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"},u={success:"text-emerald-500",error:"text-red-500",warning:"text-yellow-500",info:"text-blue-500"};return(0,n.jsxs)(r.Provider,{value:{showToast:o},children:[t,(0,n.jsx)("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-2 max-w-sm",children:s.map(e=>(0,n.jsxs)("div",{className:"".concat(m[e.type]," border rounded-lg p-3 shadow-lg flex items-start gap-3 animate-[slideIn_0.3s_ease-out]"),children:[(0,n.jsx)("svg",{className:"w-5 h-5 flex-shrink-0 mt-0.5 ".concat(u[e.type]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:d[e.type]})}),(0,n.jsx)("p",{className:"text-sm flex-1",children:e.message}),(0,n.jsx)("button",{onClick:()=>l(e.id),className:"text-gray-400 hover:text-gray-600",children:(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},e.id))})]})}},9116:function(e,t,s){"use strict";s.d(t,{Co:function(){return m},F3:function(){return d},JG:function(){return O},PR:function(){return i},QB:function(){return p},QZ:function(){return j},TL:function(){return f},TV:function(){return u},_g:function(){return N},av:function(){return c},ax:function(){return b},g6:function(){return x},gy:function(){return r},h3:function(){return y},iV:function(){return h},kv:function(){return l},o4:function(){return a},rW:function(){return g},tQ:function(){return S},xf:function(){return v}});let n=()=>localStorage.getItem("token"),a=e=>{localStorage.setItem("token",e)},r=()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},i=()=>{{let e=localStorage.getItem("user");return e?JSON.parse(e):null}},c=e=>{localStorage.setItem("user",JSON.stringify(e))},o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=n(),a={"Content-Type":"application/json",...s&&{Authorization:"Bearer ".concat(s)},...t.headers},r=await fetch("".concat("http://localhost:5001/api").concat(e),{...t,headers:a});if(!r.ok)throw Error((await r.json().catch(()=>({error:"Request failed"}))).error||"Request failed");return r.json()},l={signup:e=>o("/auth/signup",{method:"POST",body:JSON.stringify(e)}),login:e=>o("/auth/login",{method:"POST",body:JSON.stringify(e)}),requestPasswordReset:e=>o("/auth/reset-password-request",{method:"POST",body:JSON.stringify({email:e})}),resetPassword:(e,t)=>o("/auth/reset-password",{method:"POST",body:JSON.stringify({token:e,newPassword:t})}),getCurrentUser:()=>o("/auth/me")},d={getAll:()=>o("/products"),getOne:e=>o("/products/".concat(e)),create:e=>o("/products",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>o("/products/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>o("/products/".concat(e),{method:"DELETE"}),addVariant:(e,t)=>o("/products/".concat(e,"/variants"),{method:"POST",body:JSON.stringify(t)}),getVariants:e=>o("/products/".concat(e,"/variants")),updateVariant:(e,t,s)=>o("/products/".concat(e,"/variants/").concat(t),{method:"PUT",body:JSON.stringify(s)}),deleteVariant:(e,t)=>o("/products/".concat(e,"/variants/").concat(t),{method:"DELETE"}),getAttributeLines:e=>o("/products/".concat(e,"/attributes")),addAttributeLine:(e,t)=>o("/products/".concat(e,"/attributes"),{method:"POST",body:JSON.stringify(t)}),deleteAttributeLine:(e,t)=>o("/products/".concat(e,"/attributes/").concat(t),{method:"DELETE"})},m={getAll:()=>o("/plans"),getOne:e=>o("/plans/".concat(e)),create:e=>o("/plans",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>o("/plans/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>o("/plans/".concat(e),{method:"DELETE"})},u={getAll:()=>o("/subscriptions"),getOne:e=>o("/subscriptions/".concat(e)),create:e=>o("/subscriptions",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>o("/subscriptions/".concat(e),{method:"PUT",body:JSON.stringify(t)}),updateStatus:(e,t)=>o("/subscriptions/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:t})}),addLine:(e,t)=>o("/subscriptions/".concat(e,"/lines"),{method:"POST",body:JSON.stringify(t)}),delete:e=>o("/subscriptions/".concat(e),{method:"DELETE"}),deleteLine:(e,t)=>o("/subscriptions/".concat(e,"/lines/").concat(t),{method:"DELETE"}),renew:e=>o("/subscriptions/".concat(e,"/renew"),{method:"POST"}),upsell:(e,t)=>o("/subscriptions/".concat(e,"/upsell"),{method:"POST",body:JSON.stringify({additionalLines:t})}),getHistory:e=>o("/subscriptions/".concat(e,"/history"))},x={getAll:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return t})).toString():"";return o("/invoices".concat(t))},getOne:e=>o("/invoices/".concat(e)),generate:(e,t)=>o("/invoices/generate/".concat(e),{method:"POST",body:t?JSON.stringify(t):void 0}),update:(e,t)=>o("/invoices/".concat(e),{method:"PUT",body:JSON.stringify(t)}),confirm:e=>o("/invoices/".concat(e,"/confirm"),{method:"PUT"}),cancel:e=>o("/invoices/".concat(e,"/cancel"),{method:"PUT"}),addLine:(e,t)=>o("/invoices/".concat(e,"/lines"),{method:"POST",body:JSON.stringify(t)}),deleteLine:(e,t)=>o("/invoices/".concat(e,"/lines/").concat(t),{method:"DELETE"})},h={getAll:()=>o("/payments"),getOne:e=>o("/payments/".concat(e)),create:e=>o("/payments",{method:"POST",body:JSON.stringify(e)})},p={getAll:()=>o("/taxes"),getOne:e=>o("/taxes/".concat(e)),create:e=>o("/taxes",{method:"POST",body:JSON.stringify(e)}),suggest:e=>o("/taxes/suggest",{method:"POST",body:JSON.stringify(e)}),calculate:e=>o("/taxes/calculate",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>o("/taxes/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>o("/taxes/".concat(e),{method:"DELETE"})},f={getAll:()=>o("/discounts"),getOne:e=>o("/discounts/".concat(e)),create:e=>o("/discounts",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>o("/discounts/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>o("/discounts/".concat(e),{method:"DELETE"})},g={getAll:()=>o("/quotations"),getOne:e=>o("/quotations/".concat(e)),create:e=>o("/quotations",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>o("/quotations/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>o("/quotations/".concat(e),{method:"DELETE"}),addLine:(e,t)=>o("/quotations/".concat(e,"/lines"),{method:"POST",body:JSON.stringify(t)}),updateLine:(e,t,s)=>o("/quotations/".concat(e,"/lines/").concat(t),{method:"PUT",body:JSON.stringify(s)}),deleteLine:(e,t)=>o("/quotations/".concat(e,"/lines/").concat(t),{method:"DELETE"}),createSubscription:(e,t)=>o("/quotations/".concat(e,"/create-subscription"),{method:"POST",body:JSON.stringify(t)})},y={getAll:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return t})).toString():"";return o("/users".concat(t))},getOne:e=>o("/users/".concat(e)),createInternal:e=>o("/users/internal",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>o("/users/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>o("/users/".concat(e),{method:"DELETE"}),changeRole:(e,t)=>o("/users/".concat(e,"/role"),{method:"PUT",body:JSON.stringify({role:t})})},b={getDashboard:()=>o("/reports/dashboard"),getSubscriptions:()=>o("/reports/subscriptions"),getRevenue:()=>o("/reports/revenue"),getPayments:()=>o("/reports/payments"),getOverdueInvoices:()=>o("/reports/overdue-invoices")},N={createOrder:e=>o("/razorpay/create-order",{method:"POST",body:JSON.stringify({subscriptionId:e})}),verifyPayment:e=>o("/razorpay/verify-payment",{method:"POST",body:JSON.stringify(e)})},j={getAll:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return void 0!==t})).toString():"";return o("/contacts".concat(t))},getOne:e=>o("/contacts/".concat(e)),create:e=>o("/contacts",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>o("/contacts/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>o("/contacts/".concat(e),{method:"DELETE"}),getChildren:e=>o("/contacts/".concat(e,"/children"))},v={getAll:()=>o("/attributes"),getOne:e=>o("/attributes/".concat(e)),create:e=>o("/attributes",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>o("/attributes/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>o("/attributes/".concat(e),{method:"DELETE"}),addValue:(e,t)=>o("/attributes/".concat(e,"/values"),{method:"POST",body:JSON.stringify(t)}),updateValue:(e,t,s)=>o("/attributes/".concat(e,"/values/").concat(t),{method:"PUT",body:JSON.stringify(s)}),deleteValue:(e,t)=>o("/attributes/".concat(e,"/values/").concat(t),{method:"DELETE"})},S={generateInvoice:e=>o("/pdf/invoice/".concat(e),{method:"POST"}),generateQuotation:e=>o("/pdf/quotation/".concat(e),{method:"POST"})},O={getDashboard:()=>o("/portal/dashboard"),getCatalog:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return t})).toString():"";return o("/portal/catalog".concat(t))},getSubscriptions:()=>o("/portal/subscriptions"),getSubscription:e=>o("/portal/subscriptions/".concat(e)),getInvoices:()=>o("/portal/invoices"),getInvoice:e=>o("/portal/invoices/".concat(e)),getPayments:()=>o("/portal/payments"),getProfile:()=>o("/portal/profile"),updateProfile:e=>o("/portal/profile",{method:"PUT",body:JSON.stringify(e)}),subscribe:e=>o("/portal/subscribe",{method:"POST",body:JSON.stringify({planId:e})})}},9376:function(e,t,s){"use strict";var n=s(5475);s.o(n,"useParams")&&s.d(t,{useParams:function(){return n.useParams}}),s.o(n,"usePathname")&&s.d(t,{usePathname:function(){return n.usePathname}}),s.o(n,"useRouter")&&s.d(t,{useRouter:function(){return n.useRouter}}),s.o(n,"useSearchParams")&&s.d(t,{useSearchParams:function(){return n.useSearchParams}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=9212)}),_N_E=e.O()}]);