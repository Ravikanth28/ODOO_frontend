(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[576],{5466:function(e,t,a){Promise.resolve().then(a.bind(a,2516))},2516:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var s=a(7437),n=a(2265),i=a(9116),l=a(1880),r=a(5838),c=a(6143),d=a(4360);function o(){let[e,t]=(0,n.useState)([]),[a,o]=(0,n.useState)(!0),[u,m]=(0,n.useState)(!1),[h,x]=(0,n.useState)(null),[p,j]=(0,n.useState)(null),[g,v]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!1),[N,b]=(0,n.useState)({name:"",description:"",type:"PERCENTAGE",value:"",minPurchase:"",minQuantity:"",startDate:"",endDate:"",limitUsage:""}),{showToast:D}=(0,d.p)();(0,n.useEffect)(()=>{C()},[]);let C=async()=>{try{let e=await i.TL.getAll();t(e)}catch(e){D(e.message||"Failed to load discounts","error")}finally{o(!1)}},E=()=>{b({name:"",description:"",type:"PERCENTAGE",value:"",minPurchase:"",minQuantity:"",startDate:"",endDate:"",limitUsage:""})},w=e=>{x(e),b({name:e.name,description:e.description||"",type:e.type,value:String(e.value),minPurchase:e.minPurchase?String(e.minPurchase):"",minQuantity:e.minQuantity?String(e.minQuantity):"",startDate:e.startDate?e.startDate.split("T")[0]:"",endDate:e.endDate?e.endDate.split("T")[0]:"",limitUsage:e.limitUsage?String(e.limitUsage):""}),m(!0)},P=async()=>{v(!0);try{let e={name:N.name,description:N.description,type:N.type,value:parseFloat(N.value)};N.minPurchase&&(e.minPurchase=parseFloat(N.minPurchase)),N.minQuantity&&(e.minQuantity=parseInt(N.minQuantity)),N.startDate&&(e.startDate=N.startDate),N.endDate&&(e.endDate=N.endDate),N.limitUsage&&(e.limitUsage=parseInt(N.limitUsage)),h?(await i.TL.update(h.id,e),D("Discount updated successfully","success")):(await i.TL.create(e),D("Discount created successfully","success")),m(!1),C()}catch(e){D(e.message||"Failed to save discount","error")}finally{v(!1)}},k=async()=>{if(p){y(!0);try{await i.TL.delete(p.id),D("Discount deleted successfully","success"),j(null),C()}catch(e){D(e.message||"Failed to delete discount","error")}finally{y(!1)}}};return a?(0,s.jsx)(c.Z,{message:"Loading discounts..."}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Discounts"}),(0,s.jsxs)("button",{onClick:()=>{x(null),E(),m(!0)},className:"btn-primary",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Discount"]})]}),(0,s.jsx)("div",{className:"table-container",children:(0,s.jsxs)("table",{className:"data-table",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Name"}),(0,s.jsx)("th",{children:"Type"}),(0,s.jsx)("th",{children:"Value"}),(0,s.jsx)("th",{children:"Min Purchase"}),(0,s.jsx)("th",{children:"Start Date"}),(0,s.jsx)("th",{children:"End Date"}),(0,s.jsx)("th",{children:"Usage"}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsxs)("tbody",{children:[e.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"PERCENTAGE"===e.type?"badge-active":"badge-confirmed",children:e.type})}),(0,s.jsx)("td",{className:"font-medium",children:"FIXED"===e.type?"$".concat(Number(e.value).toFixed(2)):"".concat(e.value,"%")}),(0,s.jsx)("td",{children:e.minPurchase?"$".concat(Number(e.minPurchase).toFixed(2)):"-"}),(0,s.jsx)("td",{children:e.startDate?new Date(e.startDate).toLocaleDateString():"-"}),(0,s.jsx)("td",{children:e.endDate?new Date(e.endDate).toLocaleDateString():"-"}),(0,s.jsxs)("td",{children:[e.usageCount||0,e.limitUsage?" / ".concat(e.limitUsage):""]}),(0,s.jsx)("td",{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>w(e),className:"btn-secondary btn-sm",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>j(e),className:"btn-danger btn-sm",children:"Delete"})]})})]},e.id)),0===e.length&&(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:8,className:"text-center py-8 text-gray-500",children:"No discounts found. Create your first discount to get started."})})]})]})}),(0,s.jsx)(l.Z,{isOpen:u,onClose:()=>m(!1),title:h?"Edit Discount":"New Discount",onSubmit:P,submitLabel:h?"Update":"Create",loading:g,size:"lg",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Discount Name"}),(0,s.jsx)("input",{type:"text",required:!0,value:N.name,onChange:e=>b({...N,name:e.target.value}),className:"form-input",placeholder:"Enter discount name"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Description"}),(0,s.jsx)("textarea",{value:N.description,onChange:e=>b({...N,description:e.target.value}),className:"form-textarea",rows:2,placeholder:"Description (optional)"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Type"}),(0,s.jsxs)("select",{value:N.type,onChange:e=>b({...N,type:e.target.value}),className:"form-select",children:[(0,s.jsx)("option",{value:"PERCENTAGE",children:"Percentage"}),(0,s.jsx)("option",{value:"FIXED",children:"Fixed Amount"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Value"}),(0,s.jsx)("input",{type:"number",step:"0.01",required:!0,value:N.value,onChange:e=>b({...N,value:e.target.value}),className:"form-input",placeholder:"PERCENTAGE"===N.type?"e.g. 10":"0.00"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Min Purchase"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:N.minPurchase,onChange:e=>b({...N,minPurchase:e.target.value}),className:"form-input",placeholder:"0.00 (optional)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Min Quantity"}),(0,s.jsx)("input",{type:"number",min:"0",value:N.minQuantity,onChange:e=>b({...N,minQuantity:e.target.value}),className:"form-input",placeholder:"0 (optional)"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Start Date"}),(0,s.jsx)("input",{type:"date",value:N.startDate,onChange:e=>b({...N,startDate:e.target.value}),className:"form-input"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"End Date"}),(0,s.jsx)("input",{type:"date",value:N.endDate,onChange:e=>b({...N,endDate:e.target.value}),className:"form-input"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Usage Limit"}),(0,s.jsx)("input",{type:"number",min:"0",value:N.limitUsage,onChange:e=>b({...N,limitUsage:e.target.value}),className:"form-input",placeholder:"Unlimited (leave empty)"})]})]})}),(0,s.jsx)(r.Z,{isOpen:!!p,onConfirm:k,onCancel:()=>j(null),title:"Delete Discount",message:'Are you sure you want to delete "'.concat(null==p?void 0:p.name,'"? This action cannot be undone.'),confirmLabel:"Delete",variant:"danger",loading:f})]})}},5838:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(7437);function n(e){let{isOpen:t,onConfirm:a,onCancel:n,title:i,message:l,confirmLabel:r="Confirm",variant:c="danger",loading:d=!1}=e;return t?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/40",onClick:n}),(0,s.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-sm mx-4 p-6",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ".concat("danger"===c?"bg-red-100":"bg-yellow-100"),children:(0,s.jsx)("svg",{className:"w-5 h-5 ".concat("danger"===c?"text-red-600":"text-yellow-600"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:i}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:l})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,s.jsx)("button",{onClick:n,className:"btn-secondary",children:"Cancel"}),(0,s.jsx)("button",{onClick:a,disabled:d,className:"danger"===c?"btn-danger":"btn-primary",children:d?"Processing...":r})]})]})]}):null}}},function(e){e.O(0,[424,971,117,744],function(){return e(e.s=5466)}),_N_E=e.O()}]);