(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[652],{2703:function(e,a,t){Promise.resolve().then(t.bind(t,6086))},6086:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return u}});var s=t(7437),l=t(2265),r=t(9116),n=t(1880),i=t(5838),c=t(6143),d=t(4360);function u(){let[e,a]=(0,l.useState)([]),[t,u]=(0,l.useState)(!0),[o,x]=(0,l.useState)(!1),[m,v]=(0,l.useState)(null),[h,p]=(0,l.useState)(null),[y,f]=(0,l.useState)(!1),[j,g]=(0,l.useState)(!1),[b,N]=(0,l.useState)(null),[C,k]=(0,l.useState)({value:"",extraPrice:"0"}),[w,P]=(0,l.useState)(!1),[A,S]=(0,l.useState)({name:"",displayType:"select",values:[{value:"",extraPrice:"0"}]}),{showToast:T}=(0,d.p)(),L=(0,r.PR)(),E=(null==L?void 0:L.role)==="ADMIN";(0,l.useEffect)(()=>{V()},[]);let V=async()=>{try{let e=await r.xf.getAll();a(e)}catch(e){T(e.message||"Failed to load attributes","error")}finally{u(!1)}},D=e=>{v(e),S({name:e.name,displayType:e.displayType,values:[]}),x(!0)},_=async()=>{if(!A.name){T("Name is required","error");return}f(!0);try{if(m)await r.xf.update(m.id,{name:A.name,displayType:A.displayType}),T("Attribute updated","success");else{let e=A.values.filter(e=>e.value.trim());await r.xf.create({name:A.name,displayType:A.displayType,values:e.length>0?e:void 0}),T("Attribute created","success")}x(!1),V()}catch(e){T(e.message||"Failed to save attribute","error")}finally{f(!1)}},B=async()=>{if(h){g(!0);try{await r.xf.delete(h.id),T("Attribute deleted","success"),p(null),V()}catch(e){T(e.message||"Failed to delete attribute","error")}finally{g(!1)}}},F=async e=>{if(!C.value.trim()){T("Value is required","error");return}P(!0);try{await r.xf.addValue(e,{value:C.value,extraPrice:C.extraPrice}),T("Value added","success"),k({value:"",extraPrice:"0"}),V()}catch(e){T(e.message||"Failed to add value","error")}finally{P(!1)}},M=async(e,a)=>{try{await r.xf.deleteValue(e,a),T("Value deleted","success"),V()}catch(e){T(e.message||"Failed to delete value","error")}},O=e=>{S({...A,values:A.values.filter((a,t)=>t!==e)})};return t?(0,s.jsx)(c.Z,{message:"Loading attributes..."}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Attributes"}),E&&(0,s.jsxs)("button",{onClick:()=>{v(null),S({name:"",displayType:"select",values:[{value:"",extraPrice:"0"}]}),x(!0)},className:"btn-primary",children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Attribute"]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[e.map(e=>{var a,t;return(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50",onClick:()=>N(b===e.id?null:e.id),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(b===e.id?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),(0,s.jsx)("span",{className:"badge bg-gray-100 text-gray-600",children:e.displayType}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:[(null===(a=e.values)||void 0===a?void 0:a.length)||0," values"]})]}),E&&(0,s.jsxs)("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[(0,s.jsx)("button",{onClick:()=>D(e),className:"btn-secondary btn-sm",children:"Edit"}),(0,s.jsx)("button",{onClick:()=>p(e),className:"btn-danger btn-sm",children:"Delete"})]})]}),b===e.id&&(0,s.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[null===(t=e.values)||void 0===t?void 0:t.map(a=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a.value}),a.extraPrice>0&&(0,s.jsxs)("span",{className:"text-xs text-emerald-600",children:["+","â‚¹",a.extraPrice]})]}),E&&(0,s.jsx)("button",{onClick:()=>M(e.id,a.id),className:"text-red-500 hover:text-red-700 text-xs",children:"Remove"})]},a.id)),(!e.values||0===e.values.length)&&(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No values yet."})]}),E&&(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 flex items-end gap-2",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("input",{type:"text",placeholder:"Value name",value:C.value,onChange:e=>k({...C,value:e.target.value}),className:"form-input text-sm"})}),(0,s.jsx)("div",{className:"w-28",children:(0,s.jsx)("input",{type:"number",step:"0.01",placeholder:"Extra price",value:C.extraPrice,onChange:e=>k({...C,extraPrice:e.target.value}),className:"form-input text-sm"})}),(0,s.jsx)("button",{onClick:()=>F(e.id),disabled:w,className:"btn-primary btn-sm",children:w?"...":"Add"})]})]})]},e.id)}),0===e.length&&(0,s.jsx)("div",{className:"card p-8 text-center text-gray-500",children:"No attributes found. Create one to get started."})]}),(0,s.jsx)(n.Z,{isOpen:o,onClose:()=>x(!1),title:m?"Edit Attribute":"Add Attribute",onSubmit:_,submitLabel:m?"Update":"Create",loading:y,children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Name *"}),(0,s.jsx)("input",{type:"text",required:!0,value:A.name,onChange:e=>S({...A,name:e.target.value}),className:"form-input",placeholder:"e.g., Color, Size, Brand"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Display Type"}),(0,s.jsxs)("select",{value:A.displayType,onChange:e=>S({...A,displayType:e.target.value}),className:"form-select",children:[(0,s.jsx)("option",{value:"select",children:"Dropdown"}),(0,s.jsx)("option",{value:"radio",children:"Radio Buttons"}),(0,s.jsx)("option",{value:"color",children:"Color Swatches"}),(0,s.jsx)("option",{value:"pills",children:"Pills"})]})]}),!m&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Initial Values"}),A.values.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("input",{type:"text",placeholder:"Value",value:e.value,onChange:e=>{let t=[...A.values];t[a]={...t[a],value:e.target.value},S({...A,values:t})},className:"form-input flex-1"}),(0,s.jsx)("input",{type:"number",step:"0.01",placeholder:"Extra $",value:e.extraPrice,onChange:e=>{let t=[...A.values];t[a]={...t[a],extraPrice:e.target.value},S({...A,values:t})},className:"form-input w-24"}),A.values.length>1&&(0,s.jsx)("button",{type:"button",onClick:()=>O(a),className:"text-red-500 hover:text-red-700 text-sm",children:"X"})]},a)),(0,s.jsx)("button",{type:"button",onClick:()=>{S({...A,values:[...A.values,{value:"",extraPrice:"0"}]})},className:"text-sm text-primary hover:text-primary-dark",children:"+ Add another value"})]})]})}),(0,s.jsx)(i.Z,{isOpen:!!h,onConfirm:B,onCancel:()=>p(null),title:"Delete Attribute",message:'Delete "'.concat(null==h?void 0:h.name,'" and all its values? This cannot be undone.'),confirmLabel:"Delete",variant:"danger",loading:j})]})}},5838:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(7437);function l(e){let{isOpen:a,onConfirm:t,onCancel:l,title:r,message:n,confirmLabel:i="Confirm",variant:c="danger",loading:d=!1}=e;return a?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,s.jsx)("div",{className:"fixed inset-0 bg-black/40",onClick:l}),(0,s.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-sm mx-4 p-6",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ".concat("danger"===c?"bg-red-100":"bg-yellow-100"),children:(0,s.jsx)("svg",{className:"w-5 h-5 ".concat("danger"===c?"text-red-600":"text-yellow-600"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:r}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:n})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,s.jsx)("button",{onClick:l,className:"btn-secondary",children:"Cancel"}),(0,s.jsx)("button",{onClick:t,disabled:d,className:"danger"===c?"btn-danger":"btn-primary",children:d?"Processing...":i})]})]})]}):null}}},function(e){e.O(0,[424,971,117,744],function(){return e(e.s=2703)}),_N_E=e.O()}]);