(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[747],{9192:function(e,t,s){Promise.resolve().then(s.bind(s,4727))},4727:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(7437),l=s(2265),n=s(9116),i=s(1880),c=s(5838),r=s(6143),d=s(4360);function o(){let[e,t]=(0,l.useState)([]),[s,o]=(0,l.useState)(!0),[x,u]=(0,l.useState)(!1),[h,m]=(0,l.useState)(null),[j,p]=(0,l.useState)(null),[g,y]=(0,l.useState)(!1),[f,v]=(0,l.useState)(!1),[b,N]=(0,l.useState)({name:"",description:"",rate:"",taxType:"",country:"",state:"",isActive:!0}),{showToast:C}=(0,d.p)();(0,l.useEffect)(()=>{T()},[]);let T=async()=>{try{let e=await n.QB.getAll();t(e)}catch(e){C(e.message||"Failed to load taxes","error")}finally{o(!1)}},k=()=>{N({name:"",description:"",rate:"",taxType:"",country:"",state:"",isActive:!0})},w=e=>{m(e),N({name:e.name,description:e.description||"",rate:String(e.rate),taxType:e.taxType||"",country:e.country||"",state:e.state||"",isActive:!1!==e.isActive}),u(!0)},A=async()=>{y(!0);try{let e={name:b.name,description:b.description,rate:parseFloat(b.rate),taxType:b.taxType,country:b.country,state:b.state,isActive:b.isActive};h?(await n.QB.update(h.id,e),C("Tax updated successfully","success")):(await n.QB.create(e),C("Tax created successfully","success")),u(!1),T()}catch(e){C(e.message||"Failed to save tax","error")}finally{y(!1)}},S=async()=>{if(j){v(!0);try{await n.QB.delete(j.id),C("Tax deleted successfully","success"),p(null),T()}catch(e){C(e.message||"Failed to delete tax","error")}finally{v(!1)}}};return s?(0,a.jsx)(r.Z,{message:"Loading taxes..."}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Taxes"}),(0,a.jsxs)("button",{onClick:()=>{m(null),k(),u(!0)},className:"btn-primary",children:[(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Tax"]})]}),(0,a.jsx)("div",{className:"table-container",children:(0,a.jsxs)("table",{className:"data-table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Name"}),(0,a.jsx)("th",{children:"Type"}),(0,a.jsx)("th",{children:"Rate %"}),(0,a.jsx)("th",{children:"Country"}),(0,a.jsx)("th",{children:"State"}),(0,a.jsx)("th",{children:"Active"}),(0,a.jsx)("th",{children:"Actions"})]})}),(0,a.jsxs)("tbody",{children:[e.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("td",{className:"text-gray-500",children:e.taxType||"-"}),(0,a.jsxs)("td",{className:"font-medium",children:[e.rate,"%"]}),(0,a.jsx)("td",{children:e.country||"-"}),(0,a.jsx)("td",{children:e.state||"-"}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:!1!==e.isActive?"badge-active":"badge-closed",children:!1!==e.isActive?"Active":"Inactive"})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:()=>w(e),className:"btn-secondary btn-sm",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>p(e),className:"btn-danger btn-sm",children:"Delete"})]})})]},e.id)),0===e.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"text-center py-8 text-gray-500",children:"No taxes configured. Add your first tax rule to get started."})})]})]})}),(0,a.jsx)(i.Z,{isOpen:x,onClose:()=>u(!1),title:h?"Edit Tax":"New Tax",onSubmit:A,submitLabel:h?"Update":"Create",loading:g,children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"Tax Name"}),(0,a.jsx)("input",{type:"text",required:!0,value:b.name,onChange:e=>N({...b,name:e.target.value}),className:"form-input",placeholder:"e.g. GST 18%"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"Description"}),(0,a.jsx)("textarea",{value:b.description,onChange:e=>N({...b,description:e.target.value}),className:"form-textarea",rows:2,placeholder:"Description (optional)"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"Rate (%)"}),(0,a.jsx)("input",{type:"number",step:"0.01",required:!0,value:b.rate,onChange:e=>N({...b,rate:e.target.value}),className:"form-input",placeholder:"e.g. 18"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"Tax Type"}),(0,a.jsx)("input",{type:"text",value:b.taxType,onChange:e=>N({...b,taxType:e.target.value}),className:"form-input",placeholder:"e.g. GST, VAT, Sales Tax"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"Country"}),(0,a.jsx)("input",{type:"text",value:b.country,onChange:e=>N({...b,country:e.target.value}),className:"form-input",placeholder:"e.g. India, US"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"form-label",children:"State"}),(0,a.jsx)("input",{type:"text",value:b.state,onChange:e=>N({...b,state:e.target.value}),className:"form-input",placeholder:"e.g. Karnataka, California"})]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-700",children:[(0,a.jsx)("input",{type:"checkbox",checked:b.isActive,onChange:e=>N({...b,isActive:e.target.checked}),className:"form-checkbox"}),"Active"]})})]})}),(0,a.jsx)(c.Z,{isOpen:!!j,onConfirm:S,onCancel:()=>p(null),title:"Delete Tax",message:'Are you sure you want to delete "'.concat(null==j?void 0:j.name,'"? This action cannot be undone.'),confirmLabel:"Delete",variant:"danger",loading:f})]})}},5838:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(7437);function l(e){let{isOpen:t,onConfirm:s,onCancel:l,title:n,message:i,confirmLabel:c="Confirm",variant:r="danger",loading:d=!1}=e;return t?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/40",onClick:l}),(0,a.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-sm mx-4 p-6",children:[(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ".concat("danger"===r?"bg-red-100":"bg-yellow-100"),children:(0,a.jsx)("svg",{className:"w-5 h-5 ".concat("danger"===r?"text-red-600":"text-yellow-600"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:n}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:i})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:l,className:"btn-secondary",children:"Cancel"}),(0,a.jsx)("button",{onClick:s,disabled:d,className:"danger"===r?"btn-danger":"btn-primary",children:d?"Processing...":c})]})]})]}):null}}},function(e){e.O(0,[424,971,117,744],function(){return e(e.s=9192)}),_N_E=e.O()}]);