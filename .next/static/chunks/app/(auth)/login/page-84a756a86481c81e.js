(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[665],{5007:function(t,e,n){Promise.resolve().then(n.bind(n,1734))},1734:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return d}});var r=n(7437),o=n(9376),s=n(2265),a=n(7648),i=n(9116);function c(){let t=(0,o.useRouter)(),e=(0,o.useSearchParams)().get("role"),[n,c]=(0,s.useState)({email:"",password:""}),[d,u]=(0,s.useState)(""),[l,m]=(0,s.useState)(!1);(0,s.useEffect)(()=>{"admin"===e?c({email:"admin@sidaz.com",password:"admin@12345"}):c({email:"",password:""})},[e]);let h=async e=>{e.preventDefault(),u(""),m(!0);try{let e=await i.kv.login(n);(0,i.o4)(e.token),(0,i.av)(e.user),"PORTAL_USER"===e.user.role?t.push("/portal/catalog"):t.push("/dashboard")}catch(t){u(t.message||"Login failed")}finally{m(!1)}};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#F0EEEF]",children:(0,r.jsxs)("div",{className:"w-full max-w-sm",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-primary rounded-lg mb-3",children:(0,r.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Welcome Back"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:(()=>{switch(e){case"admin":return"Sign in as Admin";case"internal":return"Sign in as Internal User";case"portal":return"Sign in as User";default:return"Sign in to SIDAZ"}})()})]}),(0,r.jsx)("div",{className:"card p-6",children:(0,r.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[d&&(0,r.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md text-red-700 text-sm",children:d}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Email Address"}),(0,r.jsx)("input",{type:"email",required:!0,value:n.email,onChange:t=>c({...n,email:t.target.value}),className:"form-input",placeholder:"you@example.com"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"form-label",children:"Password"}),(0,r.jsx)("input",{type:"password",required:!0,value:n.password,onChange:t=>c({...n,password:t.target.value}),className:"form-input",placeholder:"Enter your password"})]}),(0,r.jsx)("div",{className:"flex items-center justify-end",children:(0,r.jsx)(a.default,{href:"/reset-password",className:"text-sm text-primary hover:text-primary-dark",children:"Forgot password?"})}),(0,r.jsx)("button",{type:"submit",disabled:l,className:"btn-primary w-full justify-center",children:l?"Signing in...":"Sign In"})]})}),(0,r.jsxs)("div",{className:"mt-4 space-y-2 text-center",children:["portal"===e&&(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",(0,r.jsx)(a.default,{href:"/signup",className:"text-primary hover:text-primary-dark font-medium",children:"Sign up"})]}),(0,r.jsx)("p",{children:(0,r.jsx)(a.default,{href:"/",className:"text-sm text-gray-400 hover:text-gray-600",children:"â† Back to role selection"})})]})]})})}function d(){return(0,r.jsx)(s.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#F0EEEF]",children:(0,r.jsx)("div",{className:"w-8 h-8 border-3 border-primary/30 border-t-primary rounded-full animate-spin"})}),children:(0,r.jsx)(c,{})})}},9116:function(t,e,n){"use strict";n.d(e,{Co:function(){return l},F3:function(){return u},JG:function(){return T},PR:function(){return a},QB:function(){return p},QZ:function(){return P},TL:function(){return y},TV:function(){return m},_g:function(){return O},av:function(){return i},ax:function(){return S},g6:function(){return h},gy:function(){return s},h3:function(){return b},iV:function(){return g},kv:function(){return d},o4:function(){return o},rW:function(){return f},tQ:function(){return v},xf:function(){return N}});let r=()=>localStorage.getItem("token"),o=t=>{localStorage.setItem("token",t)},s=()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},a=()=>{{let t=localStorage.getItem("user");return t?JSON.parse(t):null}},i=t=>{localStorage.setItem("user",JSON.stringify(t))},c=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r(),o={"Content-Type":"application/json",...n&&{Authorization:"Bearer ".concat(n)},...e.headers},s=await fetch("".concat("http://localhost:5001/api").concat(t),{...e,headers:o});if(!s.ok)throw Error((await s.json().catch(()=>({error:"Request failed"}))).error||"Request failed");return s.json()},d={signup:t=>c("/auth/signup",{method:"POST",body:JSON.stringify(t)}),login:t=>c("/auth/login",{method:"POST",body:JSON.stringify(t)}),requestPasswordReset:t=>c("/auth/reset-password-request",{method:"POST",body:JSON.stringify({email:t})}),resetPassword:(t,e)=>c("/auth/reset-password",{method:"POST",body:JSON.stringify({token:t,newPassword:e})}),getCurrentUser:()=>c("/auth/me")},u={getAll:()=>c("/products"),getOne:t=>c("/products/".concat(t)),create:t=>c("/products",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/products/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/products/".concat(t),{method:"DELETE"}),addVariant:(t,e)=>c("/products/".concat(t,"/variants"),{method:"POST",body:JSON.stringify(e)}),getVariants:t=>c("/products/".concat(t,"/variants")),updateVariant:(t,e,n)=>c("/products/".concat(t,"/variants/").concat(e),{method:"PUT",body:JSON.stringify(n)}),deleteVariant:(t,e)=>c("/products/".concat(t,"/variants/").concat(e),{method:"DELETE"}),getAttributeLines:t=>c("/products/".concat(t,"/attributes")),addAttributeLine:(t,e)=>c("/products/".concat(t,"/attributes"),{method:"POST",body:JSON.stringify(e)}),deleteAttributeLine:(t,e)=>c("/products/".concat(t,"/attributes/").concat(e),{method:"DELETE"})},l={getAll:()=>c("/plans"),getOne:t=>c("/plans/".concat(t)),create:t=>c("/plans",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/plans/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/plans/".concat(t),{method:"DELETE"})},m={getAll:()=>c("/subscriptions"),getOne:t=>c("/subscriptions/".concat(t)),create:t=>c("/subscriptions",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/subscriptions/".concat(t),{method:"PUT",body:JSON.stringify(e)}),updateStatus:(t,e)=>c("/subscriptions/".concat(t,"/status"),{method:"PUT",body:JSON.stringify({status:e})}),addLine:(t,e)=>c("/subscriptions/".concat(t,"/lines"),{method:"POST",body:JSON.stringify(e)}),delete:t=>c("/subscriptions/".concat(t),{method:"DELETE"}),deleteLine:(t,e)=>c("/subscriptions/".concat(t,"/lines/").concat(e),{method:"DELETE"}),renew:t=>c("/subscriptions/".concat(t,"/renew"),{method:"POST"}),upsell:(t,e)=>c("/subscriptions/".concat(t,"/upsell"),{method:"POST",body:JSON.stringify({additionalLines:e})}),getHistory:t=>c("/subscriptions/".concat(t,"/history"))},h={getAll:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return e})).toString():"";return c("/invoices".concat(e))},getOne:t=>c("/invoices/".concat(t)),generate:(t,e)=>c("/invoices/generate/".concat(t),{method:"POST",body:e?JSON.stringify(e):void 0}),update:(t,e)=>c("/invoices/".concat(t),{method:"PUT",body:JSON.stringify(e)}),confirm:t=>c("/invoices/".concat(t,"/confirm"),{method:"PUT"}),cancel:t=>c("/invoices/".concat(t,"/cancel"),{method:"PUT"}),addLine:(t,e)=>c("/invoices/".concat(t,"/lines"),{method:"POST",body:JSON.stringify(e)}),deleteLine:(t,e)=>c("/invoices/".concat(t,"/lines/").concat(e),{method:"DELETE"})},g={getAll:()=>c("/payments"),getOne:t=>c("/payments/".concat(t)),create:t=>c("/payments",{method:"POST",body:JSON.stringify(t)})},p={getAll:()=>c("/taxes"),getOne:t=>c("/taxes/".concat(t)),create:t=>c("/taxes",{method:"POST",body:JSON.stringify(t)}),suggest:t=>c("/taxes/suggest",{method:"POST",body:JSON.stringify(t)}),calculate:t=>c("/taxes/calculate",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/taxes/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/taxes/".concat(t),{method:"DELETE"})},y={getAll:()=>c("/discounts"),getOne:t=>c("/discounts/".concat(t)),create:t=>c("/discounts",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/discounts/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/discounts/".concat(t),{method:"DELETE"})},f={getAll:()=>c("/quotations"),getOne:t=>c("/quotations/".concat(t)),create:t=>c("/quotations",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/quotations/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/quotations/".concat(t),{method:"DELETE"}),addLine:(t,e)=>c("/quotations/".concat(t,"/lines"),{method:"POST",body:JSON.stringify(e)}),updateLine:(t,e,n)=>c("/quotations/".concat(t,"/lines/").concat(e),{method:"PUT",body:JSON.stringify(n)}),deleteLine:(t,e)=>c("/quotations/".concat(t,"/lines/").concat(e),{method:"DELETE"}),createSubscription:(t,e)=>c("/quotations/".concat(t,"/create-subscription"),{method:"POST",body:JSON.stringify(e)})},b={getAll:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return e})).toString():"";return c("/users".concat(e))},getOne:t=>c("/users/".concat(t)),createInternal:t=>c("/users/internal",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/users/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/users/".concat(t),{method:"DELETE"}),changeRole:(t,e)=>c("/users/".concat(t,"/role"),{method:"PUT",body:JSON.stringify({role:e})})},S={getDashboard:()=>c("/reports/dashboard"),getSubscriptions:()=>c("/reports/subscriptions"),getRevenue:()=>c("/reports/revenue"),getPayments:()=>c("/reports/payments"),getOverdueInvoices:()=>c("/reports/overdue-invoices")},O={createOrder:t=>c("/razorpay/create-order",{method:"POST",body:JSON.stringify({subscriptionId:t})}),verifyPayment:t=>c("/razorpay/verify-payment",{method:"POST",body:JSON.stringify(t)})},P={getAll:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return void 0!==e})).toString():"";return c("/contacts".concat(e))},getOne:t=>c("/contacts/".concat(t)),create:t=>c("/contacts",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/contacts/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/contacts/".concat(t),{method:"DELETE"}),getChildren:t=>c("/contacts/".concat(t,"/children"))},N={getAll:()=>c("/attributes"),getOne:t=>c("/attributes/".concat(t)),create:t=>c("/attributes",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>c("/attributes/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>c("/attributes/".concat(t),{method:"DELETE"}),addValue:(t,e)=>c("/attributes/".concat(t,"/values"),{method:"POST",body:JSON.stringify(e)}),updateValue:(t,e,n)=>c("/attributes/".concat(t,"/values/").concat(e),{method:"PUT",body:JSON.stringify(n)}),deleteValue:(t,e)=>c("/attributes/".concat(t,"/values/").concat(e),{method:"DELETE"})},v={generateInvoice:t=>c("/pdf/invoice/".concat(t),{method:"POST"}),generateQuotation:t=>c("/pdf/quotation/".concat(t),{method:"POST"})},T={getDashboard:()=>c("/portal/dashboard"),getCatalog:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return e})).toString():"";return c("/portal/catalog".concat(e))},getSubscriptions:()=>c("/portal/subscriptions"),getSubscription:t=>c("/portal/subscriptions/".concat(t)),getInvoices:()=>c("/portal/invoices"),getInvoice:t=>c("/portal/invoices/".concat(t)),getPayments:()=>c("/portal/payments"),getProfile:()=>c("/portal/profile"),updateProfile:t=>c("/portal/profile",{method:"PUT",body:JSON.stringify(t)}),subscribe:t=>c("/portal/subscribe",{method:"POST",body:JSON.stringify({planId:t})})}},9376:function(t,e,n){"use strict";var r=n(5475);n.o(r,"useParams")&&n.d(e,{useParams:function(){return r.useParams}}),n.o(r,"usePathname")&&n.d(e,{usePathname:function(){return r.usePathname}}),n.o(r,"useRouter")&&n.d(e,{useRouter:function(){return r.useRouter}}),n.o(r,"useSearchParams")&&n.d(e,{useSearchParams:function(){return r.useSearchParams}})}},function(t){t.O(0,[648,971,117,744],function(){return t(t.s=5007)}),_N_E=t.O()}]);