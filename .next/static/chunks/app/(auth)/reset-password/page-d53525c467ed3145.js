(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{448:function(t,e,n){Promise.resolve().then(n.bind(n,9395))},9395:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return d}});var s=n(7437),r=n(9376),o=n(2265),a=n(7648),c=n(9116);function i(){let t=(0,r.useRouter)(),e=(0,r.useSearchParams)().get("token"),[n,i]=(0,o.useState)(""),[d,u]=(0,o.useState)(""),[l,m]=(0,o.useState)(""),[g,h]=(0,o.useState)(""),[y,f]=(0,o.useState)(""),[p,b]=(0,o.useState)(!1),S=async t=>{t.preventDefault(),f(""),h(""),b(!0);try{await c.kv.requestPasswordReset(n),h("Password reset link sent to your email.")}catch(t){f(t.message||"Failed to send reset link")}finally{b(!1)}},O=async n=>{if(n.preventDefault(),f(""),d!==l){f("Passwords do not match");return}b(!0);try{await c.kv.resetPassword(e,d),h("Password reset successful! Redirecting..."),setTimeout(()=>t.push("/login"),2e3)}catch(t){f(t.message||"Failed to reset password")}finally{b(!1)}};return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#F0EEEF]",children:(0,s.jsxs)("div",{className:"w-full max-w-sm",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:e?"Set New Password":"Reset Password"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:e?"Enter your new password":"Enter your email to receive a reset link"})]}),(0,s.jsxs)("div",{className:"card p-6",children:[g&&(0,s.jsx)("div",{className:"p-3 bg-emerald-50 border border-emerald-200 rounded-md text-emerald-700 text-sm mb-4",children:g}),y&&(0,s.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md text-red-700 text-sm mb-4",children:y}),e?(0,s.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"New Password"}),(0,s.jsx)("input",{type:"password",required:!0,value:d,onChange:t=>u(t.target.value),className:"form-input"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Confirm Password"}),(0,s.jsx)("input",{type:"password",required:!0,value:l,onChange:t=>m(t.target.value),className:"form-input"})]}),(0,s.jsx)("button",{type:"submit",disabled:p,className:"btn-primary w-full justify-center",children:p?"Resetting...":"Reset Password"})]}):(0,s.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"form-label",children:"Email Address"}),(0,s.jsx)("input",{type:"email",required:!0,value:n,onChange:t=>i(t.target.value),className:"form-input",placeholder:"you@example.com"})]}),(0,s.jsx)("button",{type:"submit",disabled:p,className:"btn-primary w-full justify-center",children:p?"Sending...":"Send Reset Link"})]})]}),(0,s.jsx)("p",{className:"mt-4 text-center text-sm text-gray-500",children:(0,s.jsx)(a.default,{href:"/login",className:"text-primary hover:text-primary-dark font-medium",children:"Back to Login"})})]})})}function d(){return(0,s.jsx)(o.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#F0EEEF]",children:"Loading..."}),children:(0,s.jsx)(i,{})})}},9116:function(t,e,n){"use strict";n.d(e,{Co:function(){return l},F3:function(){return u},JG:function(){return v},PR:function(){return a},QB:function(){return y},QZ:function(){return P},TL:function(){return f},TV:function(){return m},_g:function(){return O},av:function(){return c},ax:function(){return S},g6:function(){return g},gy:function(){return o},h3:function(){return b},iV:function(){return h},kv:function(){return d},o4:function(){return r},rW:function(){return p},tQ:function(){return T},xf:function(){return N}});let s=()=>localStorage.getItem("token"),r=t=>{localStorage.setItem("token",t)},o=()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},a=()=>{{let t=localStorage.getItem("user");return t?JSON.parse(t):null}},c=t=>{localStorage.setItem("user",JSON.stringify(t))},i=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s(),r={"Content-Type":"application/json",...n&&{Authorization:"Bearer ".concat(n)},...e.headers},o=await fetch("".concat("http://localhost:5001/api").concat(t),{...e,headers:r});if(!o.ok)throw Error((await o.json().catch(()=>({error:"Request failed"}))).error||"Request failed");return o.json()},d={signup:t=>i("/auth/signup",{method:"POST",body:JSON.stringify(t)}),login:t=>i("/auth/login",{method:"POST",body:JSON.stringify(t)}),requestPasswordReset:t=>i("/auth/reset-password-request",{method:"POST",body:JSON.stringify({email:t})}),resetPassword:(t,e)=>i("/auth/reset-password",{method:"POST",body:JSON.stringify({token:t,newPassword:e})}),getCurrentUser:()=>i("/auth/me")},u={getAll:()=>i("/products"),getOne:t=>i("/products/".concat(t)),create:t=>i("/products",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/products/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/products/".concat(t),{method:"DELETE"}),addVariant:(t,e)=>i("/products/".concat(t,"/variants"),{method:"POST",body:JSON.stringify(e)}),getVariants:t=>i("/products/".concat(t,"/variants")),updateVariant:(t,e,n)=>i("/products/".concat(t,"/variants/").concat(e),{method:"PUT",body:JSON.stringify(n)}),deleteVariant:(t,e)=>i("/products/".concat(t,"/variants/").concat(e),{method:"DELETE"}),getAttributeLines:t=>i("/products/".concat(t,"/attributes")),addAttributeLine:(t,e)=>i("/products/".concat(t,"/attributes"),{method:"POST",body:JSON.stringify(e)}),deleteAttributeLine:(t,e)=>i("/products/".concat(t,"/attributes/").concat(e),{method:"DELETE"})},l={getAll:()=>i("/plans"),getOne:t=>i("/plans/".concat(t)),create:t=>i("/plans",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/plans/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/plans/".concat(t),{method:"DELETE"})},m={getAll:()=>i("/subscriptions"),getOne:t=>i("/subscriptions/".concat(t)),create:t=>i("/subscriptions",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/subscriptions/".concat(t),{method:"PUT",body:JSON.stringify(e)}),updateStatus:(t,e)=>i("/subscriptions/".concat(t,"/status"),{method:"PUT",body:JSON.stringify({status:e})}),addLine:(t,e)=>i("/subscriptions/".concat(t,"/lines"),{method:"POST",body:JSON.stringify(e)}),delete:t=>i("/subscriptions/".concat(t),{method:"DELETE"}),deleteLine:(t,e)=>i("/subscriptions/".concat(t,"/lines/").concat(e),{method:"DELETE"}),renew:t=>i("/subscriptions/".concat(t,"/renew"),{method:"POST"}),upsell:(t,e)=>i("/subscriptions/".concat(t,"/upsell"),{method:"POST",body:JSON.stringify({additionalLines:e})}),getHistory:t=>i("/subscriptions/".concat(t,"/history"))},g={getAll:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return e})).toString():"";return i("/invoices".concat(e))},getOne:t=>i("/invoices/".concat(t)),generate:(t,e)=>i("/invoices/generate/".concat(t),{method:"POST",body:e?JSON.stringify(e):void 0}),update:(t,e)=>i("/invoices/".concat(t),{method:"PUT",body:JSON.stringify(e)}),confirm:t=>i("/invoices/".concat(t,"/confirm"),{method:"PUT"}),cancel:t=>i("/invoices/".concat(t,"/cancel"),{method:"PUT"}),addLine:(t,e)=>i("/invoices/".concat(t,"/lines"),{method:"POST",body:JSON.stringify(e)}),deleteLine:(t,e)=>i("/invoices/".concat(t,"/lines/").concat(e),{method:"DELETE"})},h={getAll:()=>i("/payments"),getOne:t=>i("/payments/".concat(t)),create:t=>i("/payments",{method:"POST",body:JSON.stringify(t)})},y={getAll:()=>i("/taxes"),getOne:t=>i("/taxes/".concat(t)),create:t=>i("/taxes",{method:"POST",body:JSON.stringify(t)}),suggest:t=>i("/taxes/suggest",{method:"POST",body:JSON.stringify(t)}),calculate:t=>i("/taxes/calculate",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/taxes/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/taxes/".concat(t),{method:"DELETE"})},f={getAll:()=>i("/discounts"),getOne:t=>i("/discounts/".concat(t)),create:t=>i("/discounts",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/discounts/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/discounts/".concat(t),{method:"DELETE"})},p={getAll:()=>i("/quotations"),getOne:t=>i("/quotations/".concat(t)),create:t=>i("/quotations",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/quotations/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/quotations/".concat(t),{method:"DELETE"}),addLine:(t,e)=>i("/quotations/".concat(t,"/lines"),{method:"POST",body:JSON.stringify(e)}),updateLine:(t,e,n)=>i("/quotations/".concat(t,"/lines/").concat(e),{method:"PUT",body:JSON.stringify(n)}),deleteLine:(t,e)=>i("/quotations/".concat(t,"/lines/").concat(e),{method:"DELETE"}),createSubscription:(t,e)=>i("/quotations/".concat(t,"/create-subscription"),{method:"POST",body:JSON.stringify(e)})},b={getAll:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return e})).toString():"";return i("/users".concat(e))},getOne:t=>i("/users/".concat(t)),createInternal:t=>i("/users/internal",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/users/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/users/".concat(t),{method:"DELETE"}),changeRole:(t,e)=>i("/users/".concat(t,"/role"),{method:"PUT",body:JSON.stringify({role:e})})},S={getDashboard:()=>i("/reports/dashboard"),getSubscriptions:()=>i("/reports/subscriptions"),getRevenue:()=>i("/reports/revenue"),getPayments:()=>i("/reports/payments"),getOverdueInvoices:()=>i("/reports/overdue-invoices")},O={createOrder:t=>i("/razorpay/create-order",{method:"POST",body:JSON.stringify({subscriptionId:t})}),verifyPayment:t=>i("/razorpay/verify-payment",{method:"POST",body:JSON.stringify(t)})},P={getAll:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return void 0!==e})).toString():"";return i("/contacts".concat(e))},getOne:t=>i("/contacts/".concat(t)),create:t=>i("/contacts",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/contacts/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/contacts/".concat(t),{method:"DELETE"}),getChildren:t=>i("/contacts/".concat(t,"/children"))},N={getAll:()=>i("/attributes"),getOne:t=>i("/attributes/".concat(t)),create:t=>i("/attributes",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/attributes/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/attributes/".concat(t),{method:"DELETE"}),addValue:(t,e)=>i("/attributes/".concat(t,"/values"),{method:"POST",body:JSON.stringify(e)}),updateValue:(t,e,n)=>i("/attributes/".concat(t,"/values/").concat(e),{method:"PUT",body:JSON.stringify(n)}),deleteValue:(t,e)=>i("/attributes/".concat(t,"/values/").concat(e),{method:"DELETE"})},T={generateInvoice:t=>i("/pdf/invoice/".concat(t),{method:"POST"}),generateQuotation:t=>i("/pdf/quotation/".concat(t),{method:"POST"})},v={getDashboard:()=>i("/portal/dashboard"),getCatalog:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return e})).toString():"";return i("/portal/catalog".concat(e))},getSubscriptions:()=>i("/portal/subscriptions"),getSubscription:t=>i("/portal/subscriptions/".concat(t)),getInvoices:()=>i("/portal/invoices"),getInvoice:t=>i("/portal/invoices/".concat(t)),getPayments:()=>i("/portal/payments"),getProfile:()=>i("/portal/profile"),updateProfile:t=>i("/portal/profile",{method:"PUT",body:JSON.stringify(t)}),subscribe:t=>i("/portal/subscribe",{method:"POST",body:JSON.stringify({planId:t})})}},9376:function(t,e,n){"use strict";var s=n(5475);n.o(s,"useParams")&&n.d(e,{useParams:function(){return s.useParams}}),n.o(s,"usePathname")&&n.d(e,{usePathname:function(){return s.usePathname}}),n.o(s,"useRouter")&&n.d(e,{useRouter:function(){return s.useRouter}}),n.o(s,"useSearchParams")&&n.d(e,{useSearchParams:function(){return s.useSearchParams}})}},function(t){t.O(0,[648,971,117,744],function(){return t(t.s=448)}),_N_E=t.O()}]);