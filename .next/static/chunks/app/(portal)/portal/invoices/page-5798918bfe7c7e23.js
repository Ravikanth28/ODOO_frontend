(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[313],{4789:function(t,e,n){Promise.resolve().then(n.bind(n,3638))},3638:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return c}});var o=n(7437),r=n(2265),s=n(7648),a=n(9116);function c(){let[t,e]=(0,r.useState)([]),[n,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{i()},[]);let i=async()=>{try{let t=await a.JG.getInvoices();e(Array.isArray(t)?t:t.invoices||[])}catch(t){console.error("Failed to load invoices:",t)}finally{c(!1)}},d=t=>{switch(t){case"PAID":return"bg-green-100 text-green-700";case"SENT":return"bg-blue-100 text-blue-700";case"OVERDUE":return"bg-red-100 text-red-700";case"DRAFT":default:return"bg-gray-100 text-gray-600";case"CANCELLED":return"bg-gray-100 text-gray-400"}};if(n)return(0,o.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,o.jsx)("div",{className:"w-8 h-8 border-3 border-blue-200 border-t-blue-600 rounded-full animate-spin"})});let l=t.reduce((t,e)=>t+Number(e.totalAmount||0),0),u=t.filter(t=>"PAID"!==t.status&&"CANCELLED"!==t.status).reduce((t,e)=>t+Number(e.totalAmount||0)-Number(e.paidAmount||0),0);return(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"My Invoices"}),(0,o.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,o.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"Total Invoices"}),(0,o.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:t.length})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"Total Amount"}),(0,o.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:["₹",l.toLocaleString("en-IN")]})]}),(0,o.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-4",children:[(0,o.jsx)("p",{className:"text-sm text-gray-500",children:"Outstanding"}),(0,o.jsxs)("p",{className:"text-2xl font-bold mt-1 ".concat(u>0?"text-red-600":"text-green-600"),children:["₹",u.toLocaleString("en-IN")]})]})]}),0===t.length?(0,o.jsxs)("div",{className:"text-center py-20",children:[(0,o.jsx)("svg",{className:"w-12 h-12 mx-auto text-gray-300 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2z"})}),(0,o.jsx)("p",{className:"text-gray-400",children:"No invoices found"})]}):(0,o.jsx)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:(0,o.jsxs)("table",{className:"w-full text-sm",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{className:"text-xs font-medium text-gray-500 uppercase border-b border-gray-100",children:[(0,o.jsx)("th",{className:"text-left px-5 py-3",children:"Invoice"}),(0,o.jsx)("th",{className:"text-left px-5 py-3",children:"Due Date"}),(0,o.jsx)("th",{className:"text-left px-5 py-3",children:"Status"}),(0,o.jsx)("th",{className:"text-right px-5 py-3",children:"Amount"}),(0,o.jsx)("th",{className:"text-right px-5 py-3",children:"Balance"})]})}),(0,o.jsx)("tbody",{className:"divide-y divide-gray-50",children:t.map(t=>{let e=Number(t.totalAmount||0)-Number(t.paidAmount||0),n="PAID"!==t.status&&"CANCELLED"!==t.status&&new Date(t.dueDate)<new Date;return(0,o.jsxs)("tr",{className:"hover:bg-gray-50 transition-colors ".concat(n?"bg-red-50/50":""),children:[(0,o.jsxs)("td",{className:"px-5 py-3",children:[(0,o.jsx)(s.default,{href:"/portal/invoices/".concat(t.id),className:"font-medium text-blue-600 hover:text-blue-700",children:t.invoiceNumber}),t.subscription&&(0,o.jsx)("p",{className:"text-xs text-gray-400",children:t.subscription.subscriptionNumber})]}),(0,o.jsxs)("td",{className:"px-5 py-3 text-gray-600",children:[new Date(t.dueDate).toLocaleDateString("en-IN"),n&&(0,o.jsx)("span",{className:"ml-2 text-xs text-red-600 font-medium",children:"OVERDUE"})]}),(0,o.jsx)("td",{className:"px-5 py-3",children:(0,o.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat(d(t.status)),children:t.status})}),(0,o.jsxs)("td",{className:"px-5 py-3 text-right font-medium text-gray-900",children:["₹",Number(t.totalAmount).toLocaleString("en-IN")]}),(0,o.jsxs)("td",{className:"px-5 py-3 text-right font-medium ".concat(e>0?"text-red-600":"text-green-600"),children:["₹",e.toLocaleString("en-IN")]})]},t.id)})})]})})]})}},9116:function(t,e,n){"use strict";n.d(e,{Co:function(){return u},F3:function(){return l},JG:function(){return P},PR:function(){return a},QB:function(){return y},QZ:function(){return N},TL:function(){return p},TV:function(){return g},_g:function(){return S},av:function(){return c},ax:function(){return x},g6:function(){return m},gy:function(){return s},h3:function(){return f},iV:function(){return h},kv:function(){return d},o4:function(){return r},rW:function(){return b},tQ:function(){return T},xf:function(){return O}});let o=()=>localStorage.getItem("token"),r=t=>{localStorage.setItem("token",t)},s=()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},a=()=>{{let t=localStorage.getItem("user");return t?JSON.parse(t):null}},c=t=>{localStorage.setItem("user",JSON.stringify(t))},i=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o(),r={"Content-Type":"application/json",...n&&{Authorization:"Bearer ".concat(n)},...e.headers},s=await fetch("".concat("http://localhost:5001/api").concat(t),{...e,headers:r});if(!s.ok)throw Error((await s.json().catch(()=>({error:"Request failed"}))).error||"Request failed");return s.json()},d={signup:t=>i("/auth/signup",{method:"POST",body:JSON.stringify(t)}),login:t=>i("/auth/login",{method:"POST",body:JSON.stringify(t)}),requestPasswordReset:t=>i("/auth/reset-password-request",{method:"POST",body:JSON.stringify({email:t})}),resetPassword:(t,e)=>i("/auth/reset-password",{method:"POST",body:JSON.stringify({token:t,newPassword:e})}),getCurrentUser:()=>i("/auth/me")},l={getAll:()=>i("/products"),getOne:t=>i("/products/".concat(t)),create:t=>i("/products",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/products/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/products/".concat(t),{method:"DELETE"}),addVariant:(t,e)=>i("/products/".concat(t,"/variants"),{method:"POST",body:JSON.stringify(e)}),getVariants:t=>i("/products/".concat(t,"/variants")),updateVariant:(t,e,n)=>i("/products/".concat(t,"/variants/").concat(e),{method:"PUT",body:JSON.stringify(n)}),deleteVariant:(t,e)=>i("/products/".concat(t,"/variants/").concat(e),{method:"DELETE"}),getAttributeLines:t=>i("/products/".concat(t,"/attributes")),addAttributeLine:(t,e)=>i("/products/".concat(t,"/attributes"),{method:"POST",body:JSON.stringify(e)}),deleteAttributeLine:(t,e)=>i("/products/".concat(t,"/attributes/").concat(e),{method:"DELETE"})},u={getAll:()=>i("/plans"),getOne:t=>i("/plans/".concat(t)),create:t=>i("/plans",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/plans/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/plans/".concat(t),{method:"DELETE"})},g={getAll:()=>i("/subscriptions"),getOne:t=>i("/subscriptions/".concat(t)),create:t=>i("/subscriptions",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/subscriptions/".concat(t),{method:"PUT",body:JSON.stringify(e)}),updateStatus:(t,e)=>i("/subscriptions/".concat(t,"/status"),{method:"PUT",body:JSON.stringify({status:e})}),addLine:(t,e)=>i("/subscriptions/".concat(t,"/lines"),{method:"POST",body:JSON.stringify(e)}),delete:t=>i("/subscriptions/".concat(t),{method:"DELETE"}),deleteLine:(t,e)=>i("/subscriptions/".concat(t,"/lines/").concat(e),{method:"DELETE"}),renew:t=>i("/subscriptions/".concat(t,"/renew"),{method:"POST"}),upsell:(t,e)=>i("/subscriptions/".concat(t,"/upsell"),{method:"POST",body:JSON.stringify({additionalLines:e})}),getHistory:t=>i("/subscriptions/".concat(t,"/history"))},m={getAll:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return e})).toString():"";return i("/invoices".concat(e))},getOne:t=>i("/invoices/".concat(t)),generate:(t,e)=>i("/invoices/generate/".concat(t),{method:"POST",body:e?JSON.stringify(e):void 0}),update:(t,e)=>i("/invoices/".concat(t),{method:"PUT",body:JSON.stringify(e)}),confirm:t=>i("/invoices/".concat(t,"/confirm"),{method:"PUT"}),cancel:t=>i("/invoices/".concat(t,"/cancel"),{method:"PUT"}),addLine:(t,e)=>i("/invoices/".concat(t,"/lines"),{method:"POST",body:JSON.stringify(e)}),deleteLine:(t,e)=>i("/invoices/".concat(t,"/lines/").concat(e),{method:"DELETE"})},h={getAll:()=>i("/payments"),getOne:t=>i("/payments/".concat(t)),create:t=>i("/payments",{method:"POST",body:JSON.stringify(t)})},y={getAll:()=>i("/taxes"),getOne:t=>i("/taxes/".concat(t)),create:t=>i("/taxes",{method:"POST",body:JSON.stringify(t)}),suggest:t=>i("/taxes/suggest",{method:"POST",body:JSON.stringify(t)}),calculate:t=>i("/taxes/calculate",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/taxes/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/taxes/".concat(t),{method:"DELETE"})},p={getAll:()=>i("/discounts"),getOne:t=>i("/discounts/".concat(t)),create:t=>i("/discounts",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/discounts/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/discounts/".concat(t),{method:"DELETE"})},b={getAll:()=>i("/quotations"),getOne:t=>i("/quotations/".concat(t)),create:t=>i("/quotations",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/quotations/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/quotations/".concat(t),{method:"DELETE"}),addLine:(t,e)=>i("/quotations/".concat(t,"/lines"),{method:"POST",body:JSON.stringify(e)}),updateLine:(t,e,n)=>i("/quotations/".concat(t,"/lines/").concat(e),{method:"PUT",body:JSON.stringify(n)}),deleteLine:(t,e)=>i("/quotations/".concat(t,"/lines/").concat(e),{method:"DELETE"}),createSubscription:(t,e)=>i("/quotations/".concat(t,"/create-subscription"),{method:"POST",body:JSON.stringify(e)})},f={getAll:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return e})).toString():"";return i("/users".concat(e))},getOne:t=>i("/users/".concat(t)),createInternal:t=>i("/users/internal",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/users/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/users/".concat(t),{method:"DELETE"}),changeRole:(t,e)=>i("/users/".concat(t,"/role"),{method:"PUT",body:JSON.stringify({role:e})})},x={getDashboard:()=>i("/reports/dashboard"),getSubscriptions:()=>i("/reports/subscriptions"),getRevenue:()=>i("/reports/revenue"),getPayments:()=>i("/reports/payments"),getOverdueInvoices:()=>i("/reports/overdue-invoices")},S={createOrder:t=>i("/razorpay/create-order",{method:"POST",body:JSON.stringify({subscriptionId:t})}),verifyPayment:t=>i("/razorpay/verify-payment",{method:"POST",body:JSON.stringify(t)})},N={getAll:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return void 0!==e})).toString():"";return i("/contacts".concat(e))},getOne:t=>i("/contacts/".concat(t)),create:t=>i("/contacts",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/contacts/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/contacts/".concat(t),{method:"DELETE"}),getChildren:t=>i("/contacts/".concat(t,"/children"))},O={getAll:()=>i("/attributes"),getOne:t=>i("/attributes/".concat(t)),create:t=>i("/attributes",{method:"POST",body:JSON.stringify(t)}),update:(t,e)=>i("/attributes/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>i("/attributes/".concat(t),{method:"DELETE"}),addValue:(t,e)=>i("/attributes/".concat(t,"/values"),{method:"POST",body:JSON.stringify(e)}),updateValue:(t,e,n)=>i("/attributes/".concat(t,"/values/").concat(e),{method:"PUT",body:JSON.stringify(n)}),deleteValue:(t,e)=>i("/attributes/".concat(t,"/values/").concat(e),{method:"DELETE"})},T={generateInvoice:t=>i("/pdf/invoice/".concat(t),{method:"POST"}),generateQuotation:t=>i("/pdf/quotation/".concat(t),{method:"POST"})},P={getDashboard:()=>i("/portal/dashboard"),getCatalog:t=>{let e=t?"?"+new URLSearchParams(Object.entries(t).filter(t=>{let[,e]=t;return e})).toString():"";return i("/portal/catalog".concat(e))},getSubscriptions:()=>i("/portal/subscriptions"),getSubscription:t=>i("/portal/subscriptions/".concat(t)),getInvoices:()=>i("/portal/invoices"),getInvoice:t=>i("/portal/invoices/".concat(t)),getPayments:()=>i("/portal/payments"),getProfile:()=>i("/portal/profile"),updateProfile:t=>i("/portal/profile",{method:"PUT",body:JSON.stringify(t)}),subscribe:t=>i("/portal/subscribe",{method:"POST",body:JSON.stringify({planId:t})})}}},function(t){t.O(0,[648,971,117,744],function(){return t(t.s=4789)}),_N_E=t.O()}]);