(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[472],{327:function(e,t,s){Promise.resolve().then(s.bind(s,8497))},8497:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var a=s(7437),r=s(2265),n=s(9376),o=s(7648),c=s(9116);function i(){var e,t;let{id:s}=(0,n.useParams)(),[i,d]=(0,r.useState)(null),[l,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{s&&m()},[s]);let m=async()=>{try{let e=await c.JG.getInvoice(s);d(e)}catch(e){console.error("Failed to load invoice:",e)}finally{u(!1)}};if(l)return(0,a.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,a.jsx)("div",{className:"w-8 h-8 border-3 border-blue-200 border-t-blue-600 rounded-full animate-spin"})});if(!i)return(0,a.jsxs)("div",{className:"text-center py-20",children:[(0,a.jsx)("p",{className:"text-gray-400",children:"Invoice not found"}),(0,a.jsx)(o.default,{href:"/portal/invoices",className:"text-sm text-blue-600 mt-2 inline-block",children:"← Back to invoices"})]});let x=Number(i.totalAmount||0)-Number(i.paidAmount||0),h="PAID"!==i.status&&"CANCELLED"!==i.status&&new Date(i.dueDate)<new Date;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(o.default,{href:"/portal/invoices",className:"text-sm text-gray-500 hover:text-gray-700 mb-1 inline-block",children:"← Back to invoices"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:i.invoiceNumber}),(0,a.jsx)("span",{className:"px-2.5 py-1 rounded-full text-xs font-medium ".concat("PAID"===i.status?"bg-green-100 text-green-700":"OVERDUE"===i.status||h?"bg-red-100 text-red-700":"SENT"===i.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:h&&"PAID"!==i.status?"OVERDUE":i.status})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase mb-3",children:"Invoice Details"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Invoice Date"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:new Date(i.invoiceDate).toLocaleDateString("en-IN")})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Due Date"}),(0,a.jsx)("span",{className:"font-medium ".concat(h?"text-red-600":"text-gray-900"),children:new Date(i.dueDate).toLocaleDateString("en-IN")})]}),i.subscription&&(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Subscription"}),(0,a.jsx)("span",{className:"font-medium text-gray-900",children:i.subscription.subscriptionNumber})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase mb-3",children:"Amounts"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Subtotal"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:["₹",Number(i.subtotal).toLocaleString("en-IN")]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Tax"}),(0,a.jsxs)("span",{className:"font-medium text-gray-900",children:["₹",Number(i.taxAmount||0).toLocaleString("en-IN")]})]}),(0,a.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,a.jsx)("span",{className:"text-gray-700 font-medium",children:"Total"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["₹",Number(i.totalAmount).toLocaleString("en-IN")]})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase mb-3",children:"Payment Status"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Paid"}),(0,a.jsxs)("span",{className:"font-medium text-green-600",children:["₹",Number(i.paidAmount||0).toLocaleString("en-IN")]})]}),(0,a.jsxs)("div",{className:"flex justify-between border-t border-gray-100 pt-2",children:[(0,a.jsx)("span",{className:"text-gray-700 font-medium",children:"Balance Due"}),(0,a.jsxs)("span",{className:"text-lg font-bold ".concat(x>0?"text-red-600":"text-green-600"),children:["₹",x.toLocaleString("en-IN")]})]})]})]})]}),(null===(e=i.lines)||void 0===e?void 0:e.length)>0&&(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[(0,a.jsx)("div",{className:"px-5 py-4 border-b border-gray-100",children:(0,a.jsx)("h2",{className:"font-semibold text-gray-900",children:"Line Items"})}),(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-xs font-medium text-gray-500 uppercase border-b border-gray-100",children:[(0,a.jsx)("th",{className:"text-left px-5 py-3",children:"Description"}),(0,a.jsx)("th",{className:"text-right px-5 py-3",children:"Qty"}),(0,a.jsx)("th",{className:"text-right px-5 py-3",children:"Unit Price"}),(0,a.jsx)("th",{className:"text-right px-5 py-3",children:"Discount"}),(0,a.jsx)("th",{className:"text-right px-5 py-3",children:"Tax"}),(0,a.jsx)("th",{className:"text-right px-5 py-3",children:"Amount"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-50",children:i.lines.map(e=>{var t;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-5 py-3 text-gray-900",children:(null===(t=e.product)||void 0===t?void 0:t.name)||e.description||"—"}),(0,a.jsx)("td",{className:"px-5 py-3 text-right text-gray-600",children:e.quantity}),(0,a.jsxs)("td",{className:"px-5 py-3 text-right text-gray-600",children:["₹",Number(e.unitPrice).toLocaleString("en-IN")]}),(0,a.jsxs)("td",{className:"px-5 py-3 text-right text-gray-600",children:[e.discount||0,"%"]}),(0,a.jsxs)("td",{className:"px-5 py-3 text-right text-gray-600",children:["₹",Number(e.taxAmount||0).toLocaleString("en-IN")]}),(0,a.jsxs)("td",{className:"px-5 py-3 text-right font-medium text-gray-900",children:["₹",Number(e.amount).toLocaleString("en-IN")]})]},e.id)})}),(0,a.jsxs)("tfoot",{className:"border-t border-gray-200",children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{colSpan:5,className:"px-5 py-3 text-right font-medium text-gray-700",children:"Subtotal"}),(0,a.jsxs)("td",{className:"px-5 py-3 text-right font-medium text-gray-900",children:["₹",Number(i.subtotal).toLocaleString("en-IN")]})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{colSpan:5,className:"px-5 py-2 text-right text-gray-500",children:"Tax"}),(0,a.jsxs)("td",{className:"px-5 py-2 text-right text-gray-600",children:["₹",Number(i.taxAmount||0).toLocaleString("en-IN")]})]}),(0,a.jsxs)("tr",{className:"border-t border-gray-200",children:[(0,a.jsx)("td",{colSpan:5,className:"px-5 py-3 text-right font-bold text-gray-900",children:"Total"}),(0,a.jsxs)("td",{className:"px-5 py-3 text-right text-lg font-bold text-gray-900",children:["₹",Number(i.totalAmount).toLocaleString("en-IN")]})]})]})]})]}),(null===(t=i.payments)||void 0===t?void 0:t.length)>0&&(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200",children:[(0,a.jsx)("div",{className:"px-5 py-4 border-b border-gray-100",children:(0,a.jsx)("h2",{className:"font-semibold text-gray-900",children:"Payment History"})}),(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"text-xs font-medium text-gray-500 uppercase border-b border-gray-100",children:[(0,a.jsx)("th",{className:"text-left px-5 py-3",children:"Date"}),(0,a.jsx)("th",{className:"text-left px-5 py-3",children:"Method"}),(0,a.jsx)("th",{className:"text-left px-5 py-3",children:"Reference"}),(0,a.jsx)("th",{className:"text-left px-5 py-3",children:"Status"}),(0,a.jsx)("th",{className:"text-right px-5 py-3",children:"Amount"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-50",children:i.payments.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-5 py-3 text-gray-900",children:new Date(e.paymentDate).toLocaleDateString("en-IN")}),(0,a.jsx)("td",{className:"px-5 py-3 text-gray-600",children:e.paymentMethod}),(0,a.jsx)("td",{className:"px-5 py-3 text-gray-600",children:e.reference||"—"}),(0,a.jsx)("td",{className:"px-5 py-3",children:(0,a.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("COMPLETED"===e.status?"bg-green-100 text-green-700":"PENDING"===e.status?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"),children:e.status})}),(0,a.jsxs)("td",{className:"px-5 py-3 text-right font-medium text-gray-900",children:["₹",Number(e.amount).toLocaleString("en-IN")]})]},e.id))})]})]}),i.notes&&(0,a.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-5",children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-400 uppercase mb-2",children:"Notes"}),(0,a.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:i.notes})]})]})}},9116:function(e,t,s){"use strict";s.d(t,{Co:function(){return u},F3:function(){return l},JG:function(){return v},PR:function(){return o},QB:function(){return g},QZ:function(){return S},TL:function(){return p},TV:function(){return m},_g:function(){return f},av:function(){return c},ax:function(){return N},g6:function(){return x},gy:function(){return n},h3:function(){return b},iV:function(){return h},kv:function(){return d},o4:function(){return r},rW:function(){return y},tQ:function(){return O},xf:function(){return j}});let a=()=>localStorage.getItem("token"),r=e=>{localStorage.setItem("token",e)},n=()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},o=()=>{{let e=localStorage.getItem("user");return e?JSON.parse(e):null}},c=e=>{localStorage.setItem("user",JSON.stringify(e))},i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a(),r={"Content-Type":"application/json",...s&&{Authorization:"Bearer ".concat(s)},...t.headers},n=await fetch("".concat("http://localhost:5001/api").concat(e),{...t,headers:r});if(!n.ok)throw Error((await n.json().catch(()=>({error:"Request failed"}))).error||"Request failed");return n.json()},d={signup:e=>i("/auth/signup",{method:"POST",body:JSON.stringify(e)}),login:e=>i("/auth/login",{method:"POST",body:JSON.stringify(e)}),requestPasswordReset:e=>i("/auth/reset-password-request",{method:"POST",body:JSON.stringify({email:e})}),resetPassword:(e,t)=>i("/auth/reset-password",{method:"POST",body:JSON.stringify({token:e,newPassword:t})}),getCurrentUser:()=>i("/auth/me")},l={getAll:()=>i("/products"),getOne:e=>i("/products/".concat(e)),create:e=>i("/products",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/products/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/products/".concat(e),{method:"DELETE"}),addVariant:(e,t)=>i("/products/".concat(e,"/variants"),{method:"POST",body:JSON.stringify(t)}),getVariants:e=>i("/products/".concat(e,"/variants")),updateVariant:(e,t,s)=>i("/products/".concat(e,"/variants/").concat(t),{method:"PUT",body:JSON.stringify(s)}),deleteVariant:(e,t)=>i("/products/".concat(e,"/variants/").concat(t),{method:"DELETE"}),getAttributeLines:e=>i("/products/".concat(e,"/attributes")),addAttributeLine:(e,t)=>i("/products/".concat(e,"/attributes"),{method:"POST",body:JSON.stringify(t)}),deleteAttributeLine:(e,t)=>i("/products/".concat(e,"/attributes/").concat(t),{method:"DELETE"})},u={getAll:()=>i("/plans"),getOne:e=>i("/plans/".concat(e)),create:e=>i("/plans",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/plans/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/plans/".concat(e),{method:"DELETE"})},m={getAll:()=>i("/subscriptions"),getOne:e=>i("/subscriptions/".concat(e)),create:e=>i("/subscriptions",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/subscriptions/".concat(e),{method:"PUT",body:JSON.stringify(t)}),updateStatus:(e,t)=>i("/subscriptions/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:t})}),addLine:(e,t)=>i("/subscriptions/".concat(e,"/lines"),{method:"POST",body:JSON.stringify(t)}),delete:e=>i("/subscriptions/".concat(e),{method:"DELETE"}),deleteLine:(e,t)=>i("/subscriptions/".concat(e,"/lines/").concat(t),{method:"DELETE"}),renew:e=>i("/subscriptions/".concat(e,"/renew"),{method:"POST"}),upsell:(e,t)=>i("/subscriptions/".concat(e,"/upsell"),{method:"POST",body:JSON.stringify({additionalLines:t})}),getHistory:e=>i("/subscriptions/".concat(e,"/history"))},x={getAll:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return t})).toString():"";return i("/invoices".concat(t))},getOne:e=>i("/invoices/".concat(e)),generate:(e,t)=>i("/invoices/generate/".concat(e),{method:"POST",body:t?JSON.stringify(t):void 0}),update:(e,t)=>i("/invoices/".concat(e),{method:"PUT",body:JSON.stringify(t)}),confirm:e=>i("/invoices/".concat(e,"/confirm"),{method:"PUT"}),cancel:e=>i("/invoices/".concat(e,"/cancel"),{method:"PUT"}),addLine:(e,t)=>i("/invoices/".concat(e,"/lines"),{method:"POST",body:JSON.stringify(t)}),deleteLine:(e,t)=>i("/invoices/".concat(e,"/lines/").concat(t),{method:"DELETE"})},h={getAll:()=>i("/payments"),getOne:e=>i("/payments/".concat(e)),create:e=>i("/payments",{method:"POST",body:JSON.stringify(e)})},g={getAll:()=>i("/taxes"),getOne:e=>i("/taxes/".concat(e)),create:e=>i("/taxes",{method:"POST",body:JSON.stringify(e)}),suggest:e=>i("/taxes/suggest",{method:"POST",body:JSON.stringify(e)}),calculate:e=>i("/taxes/calculate",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/taxes/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/taxes/".concat(e),{method:"DELETE"})},p={getAll:()=>i("/discounts"),getOne:e=>i("/discounts/".concat(e)),create:e=>i("/discounts",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/discounts/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/discounts/".concat(e),{method:"DELETE"})},y={getAll:()=>i("/quotations"),getOne:e=>i("/quotations/".concat(e)),create:e=>i("/quotations",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/quotations/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/quotations/".concat(e),{method:"DELETE"}),addLine:(e,t)=>i("/quotations/".concat(e,"/lines"),{method:"POST",body:JSON.stringify(t)}),updateLine:(e,t,s)=>i("/quotations/".concat(e,"/lines/").concat(t),{method:"PUT",body:JSON.stringify(s)}),deleteLine:(e,t)=>i("/quotations/".concat(e,"/lines/").concat(t),{method:"DELETE"}),createSubscription:(e,t)=>i("/quotations/".concat(e,"/create-subscription"),{method:"POST",body:JSON.stringify(t)})},b={getAll:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return t})).toString():"";return i("/users".concat(t))},getOne:e=>i("/users/".concat(e)),createInternal:e=>i("/users/internal",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/users/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/users/".concat(e),{method:"DELETE"}),changeRole:(e,t)=>i("/users/".concat(e,"/role"),{method:"PUT",body:JSON.stringify({role:t})})},N={getDashboard:()=>i("/reports/dashboard"),getSubscriptions:()=>i("/reports/subscriptions"),getRevenue:()=>i("/reports/revenue"),getPayments:()=>i("/reports/payments"),getOverdueInvoices:()=>i("/reports/overdue-invoices")},f={createOrder:e=>i("/razorpay/create-order",{method:"POST",body:JSON.stringify({subscriptionId:e})}),verifyPayment:e=>i("/razorpay/verify-payment",{method:"POST",body:JSON.stringify(e)})},S={getAll:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return void 0!==t})).toString():"";return i("/contacts".concat(t))},getOne:e=>i("/contacts/".concat(e)),create:e=>i("/contacts",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/contacts/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/contacts/".concat(e),{method:"DELETE"}),getChildren:e=>i("/contacts/".concat(e,"/children"))},j={getAll:()=>i("/attributes"),getOne:e=>i("/attributes/".concat(e)),create:e=>i("/attributes",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/attributes/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/attributes/".concat(e),{method:"DELETE"}),addValue:(e,t)=>i("/attributes/".concat(e,"/values"),{method:"POST",body:JSON.stringify(t)}),updateValue:(e,t,s)=>i("/attributes/".concat(e,"/values/").concat(t),{method:"PUT",body:JSON.stringify(s)}),deleteValue:(e,t)=>i("/attributes/".concat(e,"/values/").concat(t),{method:"DELETE"})},O={generateInvoice:e=>i("/pdf/invoice/".concat(e),{method:"POST"}),generateQuotation:e=>i("/pdf/quotation/".concat(e),{method:"POST"})},v={getDashboard:()=>i("/portal/dashboard"),getCatalog:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return t})).toString():"";return i("/portal/catalog".concat(t))},getSubscriptions:()=>i("/portal/subscriptions"),getSubscription:e=>i("/portal/subscriptions/".concat(e)),getInvoices:()=>i("/portal/invoices"),getInvoice:e=>i("/portal/invoices/".concat(e)),getPayments:()=>i("/portal/payments"),getProfile:()=>i("/portal/profile"),updateProfile:e=>i("/portal/profile",{method:"PUT",body:JSON.stringify(e)}),subscribe:e=>i("/portal/subscribe",{method:"POST",body:JSON.stringify({planId:e})})}},9376:function(e,t,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=327)}),_N_E=e.O()}]);