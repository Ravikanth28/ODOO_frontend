(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[149],{7251:function(e,t,n){Promise.resolve().then(n.bind(n,1242))},1242:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var s=n(7437),a=n(2265),r=n(7648),o=n(9116);function i(){var e,t,n;let[i,c]=(0,a.useState)(null),[d,l]=(0,a.useState)(!0);(0,a.useEffect)(()=>{u()},[]);let u=async()=>{try{let e=await o.JG.getDashboard();c(e)}catch(e){console.error("Failed to load dashboard:",e)}finally{l(!1)}};if(d)return(0,s.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,s.jsx)("div",{className:"w-8 h-8 border-3 border-blue-200 border-t-blue-600 rounded-full animate-spin"})});if(!i)return(0,s.jsx)("div",{className:"text-center py-20 text-gray-500",children:"Failed to load dashboard data."});let m=[{label:"Active Subscriptions",value:i.stats.activeSubscriptions,color:"bg-green-50 text-green-700",icon:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},{label:"Total Invoices",value:i.stats.totalInvoices,color:"bg-blue-50 text-blue-700",icon:"M9 14l6-6m-5.5.5h.01m4.99 5h.01M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16l3.5-2 3.5 2 3.5-2 3.5 2z"},{label:"Unpaid Invoices",value:i.stats.unpaidInvoices,color:"bg-amber-50 text-amber-700",icon:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},{label:"Total Paid",value:"₹".concat(Number(i.stats.totalPaid).toLocaleString("en-IN")),color:"bg-purple-50 text-purple-700",icon:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2z"}];return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Dashboard"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:m.map(e=>(0,s.jsx)("div",{className:"".concat(e.color," rounded-xl p-5"),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("svg",{className:"w-6 h-6 opacity-70",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:e.icon})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:e.value}),(0,s.jsx)("p",{className:"text-sm opacity-80",children:e.label})]})]})},e.label))}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-100",children:[(0,s.jsx)("h2",{className:"font-semibold text-gray-900",children:"Recent Subscriptions"}),(0,s.jsx)(r.default,{href:"/portal/subscriptions",className:"text-sm text-blue-600 hover:text-blue-700",children:"View all →"})]}),(0,s.jsx)("div",{className:"divide-y divide-gray-50",children:(null===(e=i.recentSubscriptions)||void 0===e?void 0:e.length)>0?i.recentSubscriptions.map(e=>{var t;return(0,s.jsxs)(r.default,{href:"/portal/subscriptions/".concat(e.id),className:"flex items-center justify-between px-5 py-3 hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.subscriptionNumber}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:(null===(t=e.plan)||void 0===t?void 0:t.name)||"No plan"})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("span",{className:"inline-block px-2 py-0.5 rounded-full text-xs font-medium ".concat("ACTIVE"===e.status?"bg-green-100 text-green-700":"CONFIRMED"===e.status?"bg-blue-100 text-blue-700":"CLOSED"===e.status?"bg-gray-100 text-gray-600":"bg-amber-100 text-amber-700"),children:e.status}),(0,s.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["₹",Number(e.recurringTotal).toLocaleString("en-IN"),"/mo"]})]})]},e.id)}):(0,s.jsx)("p",{className:"px-5 py-8 text-center text-gray-400",children:"No subscriptions yet"})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-100",children:[(0,s.jsx)("h2",{className:"font-semibold text-gray-900",children:"Recent Invoices"}),(0,s.jsx)(r.default,{href:"/portal/invoices",className:"text-sm text-blue-600 hover:text-blue-700",children:"View all →"})]}),(0,s.jsx)("div",{className:"divide-y divide-gray-50",children:(null===(t=i.recentInvoices)||void 0===t?void 0:t.length)>0?i.recentInvoices.map(e=>(0,s.jsxs)(r.default,{href:"/portal/invoices/".concat(e.id),className:"flex items-center justify-between px-5 py-3 hover:bg-gray-50 transition-colors",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:e.invoiceNumber}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Due: ",new Date(e.dueDate).toLocaleDateString("en-IN")]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("span",{className:"inline-block px-2 py-0.5 rounded-full text-xs font-medium ".concat("PAID"===e.status?"bg-green-100 text-green-700":"OVERDUE"===e.status?"bg-red-100 text-red-700":"SENT"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"),children:e.status}),(0,s.jsxs)("p",{className:"text-sm font-medium text-gray-900 mt-1",children:["₹",Number(e.totalAmount).toLocaleString("en-IN")]})]})]},e.id)):(0,s.jsx)("p",{className:"px-5 py-8 text-center text-gray-400",children:"No invoices yet"})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-b border-gray-100",children:[(0,s.jsx)("h2",{className:"font-semibold text-gray-900",children:"Recent Payments"}),(0,s.jsx)(r.default,{href:"/portal/payments",className:"text-sm text-blue-600 hover:text-blue-700",children:"View all →"})]}),(0,s.jsx)("div",{className:"divide-y divide-gray-50",children:(null===(n=i.recentPayments)||void 0===n?void 0:n.length)>0?i.recentPayments.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between px-5 py-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-medium text-gray-900",children:["₹",Number(e.amount).toLocaleString("en-IN")]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.paymentMethod," • ",new Date(e.paymentDate).toLocaleDateString("en-IN")]})]}),(0,s.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("COMPLETED"===e.status?"bg-green-100 text-green-700":"PENDING"===e.status?"bg-amber-100 text-amber-700":"bg-red-100 text-red-700"),children:e.status})]},e.id)):(0,s.jsx)("p",{className:"px-5 py-8 text-center text-gray-400",children:"No payments yet"})})]})]})}},9116:function(e,t,n){"use strict";n.d(t,{Co:function(){return u},F3:function(){return l},JG:function(){return T},PR:function(){return o},QB:function(){return h},QZ:function(){return S},TL:function(){return y},TV:function(){return m},_g:function(){return N},av:function(){return i},ax:function(){return f},g6:function(){return g},gy:function(){return r},h3:function(){return x},iV:function(){return b},kv:function(){return d},o4:function(){return a},rW:function(){return p},tQ:function(){return O},xf:function(){return v}});let s=()=>localStorage.getItem("token"),a=e=>{localStorage.setItem("token",e)},r=()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},o=()=>{{let e=localStorage.getItem("user");return e?JSON.parse(e):null}},i=e=>{localStorage.setItem("user",JSON.stringify(e))},c=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=s(),a={"Content-Type":"application/json",...n&&{Authorization:"Bearer ".concat(n)},...t.headers},r=await fetch("".concat("http://localhost:5001/api").concat(e),{...t,headers:a});if(!r.ok)throw Error((await r.json().catch(()=>({error:"Request failed"}))).error||"Request failed");return r.json()},d={signup:e=>c("/auth/signup",{method:"POST",body:JSON.stringify(e)}),login:e=>c("/auth/login",{method:"POST",body:JSON.stringify(e)}),requestPasswordReset:e=>c("/auth/reset-password-request",{method:"POST",body:JSON.stringify({email:e})}),resetPassword:(e,t)=>c("/auth/reset-password",{method:"POST",body:JSON.stringify({token:e,newPassword:t})}),getCurrentUser:()=>c("/auth/me")},l={getAll:()=>c("/products"),getOne:e=>c("/products/".concat(e)),create:e=>c("/products",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>c("/products/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>c("/products/".concat(e),{method:"DELETE"}),addVariant:(e,t)=>c("/products/".concat(e,"/variants"),{method:"POST",body:JSON.stringify(t)}),getVariants:e=>c("/products/".concat(e,"/variants")),updateVariant:(e,t,n)=>c("/products/".concat(e,"/variants/").concat(t),{method:"PUT",body:JSON.stringify(n)}),deleteVariant:(e,t)=>c("/products/".concat(e,"/variants/").concat(t),{method:"DELETE"}),getAttributeLines:e=>c("/products/".concat(e,"/attributes")),addAttributeLine:(e,t)=>c("/products/".concat(e,"/attributes"),{method:"POST",body:JSON.stringify(t)}),deleteAttributeLine:(e,t)=>c("/products/".concat(e,"/attributes/").concat(t),{method:"DELETE"})},u={getAll:()=>c("/plans"),getOne:e=>c("/plans/".concat(e)),create:e=>c("/plans",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>c("/plans/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>c("/plans/".concat(e),{method:"DELETE"})},m={getAll:()=>c("/subscriptions"),getOne:e=>c("/subscriptions/".concat(e)),create:e=>c("/subscriptions",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>c("/subscriptions/".concat(e),{method:"PUT",body:JSON.stringify(t)}),updateStatus:(e,t)=>c("/subscriptions/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:t})}),addLine:(e,t)=>c("/subscriptions/".concat(e,"/lines"),{method:"POST",body:JSON.stringify(t)}),delete:e=>c("/subscriptions/".concat(e),{method:"DELETE"}),deleteLine:(e,t)=>c("/subscriptions/".concat(e,"/lines/").concat(t),{method:"DELETE"}),renew:e=>c("/subscriptions/".concat(e,"/renew"),{method:"POST"}),upsell:(e,t)=>c("/subscriptions/".concat(e,"/upsell"),{method:"POST",body:JSON.stringify({additionalLines:t})}),getHistory:e=>c("/subscriptions/".concat(e,"/history"))},g={getAll:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return t})).toString():"";return c("/invoices".concat(t))},getOne:e=>c("/invoices/".concat(e)),generate:(e,t)=>c("/invoices/generate/".concat(e),{method:"POST",body:t?JSON.stringify(t):void 0}),update:(e,t)=>c("/invoices/".concat(e),{method:"PUT",body:JSON.stringify(t)}),confirm:e=>c("/invoices/".concat(e,"/confirm"),{method:"PUT"}),cancel:e=>c("/invoices/".concat(e,"/cancel"),{method:"PUT"}),addLine:(e,t)=>c("/invoices/".concat(e,"/lines"),{method:"POST",body:JSON.stringify(t)}),deleteLine:(e,t)=>c("/invoices/".concat(e,"/lines/").concat(t),{method:"DELETE"})},b={getAll:()=>c("/payments"),getOne:e=>c("/payments/".concat(e)),create:e=>c("/payments",{method:"POST",body:JSON.stringify(e)})},h={getAll:()=>c("/taxes"),getOne:e=>c("/taxes/".concat(e)),create:e=>c("/taxes",{method:"POST",body:JSON.stringify(e)}),suggest:e=>c("/taxes/suggest",{method:"POST",body:JSON.stringify(e)}),calculate:e=>c("/taxes/calculate",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>c("/taxes/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>c("/taxes/".concat(e),{method:"DELETE"})},y={getAll:()=>c("/discounts"),getOne:e=>c("/discounts/".concat(e)),create:e=>c("/discounts",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>c("/discounts/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>c("/discounts/".concat(e),{method:"DELETE"})},p={getAll:()=>c("/quotations"),getOne:e=>c("/quotations/".concat(e)),create:e=>c("/quotations",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>c("/quotations/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>c("/quotations/".concat(e),{method:"DELETE"}),addLine:(e,t)=>c("/quotations/".concat(e,"/lines"),{method:"POST",body:JSON.stringify(t)}),updateLine:(e,t,n)=>c("/quotations/".concat(e,"/lines/").concat(t),{method:"PUT",body:JSON.stringify(n)}),deleteLine:(e,t)=>c("/quotations/".concat(e,"/lines/").concat(t),{method:"DELETE"}),createSubscription:(e,t)=>c("/quotations/".concat(e,"/create-subscription"),{method:"POST",body:JSON.stringify(t)})},x={getAll:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return t})).toString():"";return c("/users".concat(t))},getOne:e=>c("/users/".concat(e)),createInternal:e=>c("/users/internal",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>c("/users/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>c("/users/".concat(e),{method:"DELETE"}),changeRole:(e,t)=>c("/users/".concat(e,"/role"),{method:"PUT",body:JSON.stringify({role:t})})},f={getDashboard:()=>c("/reports/dashboard"),getSubscriptions:()=>c("/reports/subscriptions"),getRevenue:()=>c("/reports/revenue"),getPayments:()=>c("/reports/payments"),getOverdueInvoices:()=>c("/reports/overdue-invoices")},N={createOrder:e=>c("/razorpay/create-order",{method:"POST",body:JSON.stringify({subscriptionId:e})}),verifyPayment:e=>c("/razorpay/verify-payment",{method:"POST",body:JSON.stringify(e)})},S={getAll:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return void 0!==t})).toString():"";return c("/contacts".concat(t))},getOne:e=>c("/contacts/".concat(e)),create:e=>c("/contacts",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>c("/contacts/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>c("/contacts/".concat(e),{method:"DELETE"}),getChildren:e=>c("/contacts/".concat(e,"/children"))},v={getAll:()=>c("/attributes"),getOne:e=>c("/attributes/".concat(e)),create:e=>c("/attributes",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>c("/attributes/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>c("/attributes/".concat(e),{method:"DELETE"}),addValue:(e,t)=>c("/attributes/".concat(e,"/values"),{method:"POST",body:JSON.stringify(t)}),updateValue:(e,t,n)=>c("/attributes/".concat(e,"/values/").concat(t),{method:"PUT",body:JSON.stringify(n)}),deleteValue:(e,t)=>c("/attributes/".concat(e,"/values/").concat(t),{method:"DELETE"})},O={generateInvoice:e=>c("/pdf/invoice/".concat(e),{method:"POST"}),generateQuotation:e=>c("/pdf/quotation/".concat(e),{method:"POST"})},T={getDashboard:()=>c("/portal/dashboard"),getCatalog:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return t})).toString():"";return c("/portal/catalog".concat(t))},getSubscriptions:()=>c("/portal/subscriptions"),getSubscription:e=>c("/portal/subscriptions/".concat(e)),getInvoices:()=>c("/portal/invoices"),getInvoice:e=>c("/portal/invoices/".concat(e)),getPayments:()=>c("/portal/payments"),getProfile:()=>c("/portal/profile"),updateProfile:e=>c("/portal/profile",{method:"PUT",body:JSON.stringify(e)}),subscribe:e=>c("/portal/subscribe",{method:"POST",body:JSON.stringify({planId:e})})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=7251)}),_N_E=e.O()}]);