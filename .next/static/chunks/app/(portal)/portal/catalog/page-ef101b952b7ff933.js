(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[799],{1758:function(e,t,r){Promise.resolve().then(r.bind(r,677))},677:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var n=r(7437),o=r(2265),a=r(9116);function s(){let[e,t]=(0,o.useState)([]),[r,s]=(0,o.useState)(!0),[c,i]=(0,o.useState)(""),[d,l]=(0,o.useState)(""),[u,g]=(0,o.useState)(""),[p,m]=(0,o.useState)([]),[y,h]=(0,o.useState)([]),[b,f]=(0,o.useState)(null);(0,o.useEffect)(()=>{S()},[c,d,u]);let S=async()=>{try{let e=await a.JG.getCatalog({search:c||void 0,productType:d||void 0,category:u||void 0}),r=e.products||e;t(Array.isArray(r)?r:[]),e.productTypes&&m(e.productTypes),e.categories&&h(e.categories)}catch(e){console.error("Failed to load catalog:",e)}finally{s(!1)}},x=e=>{let t=localStorage.getItem("portal_cart"),r=[];if(t)try{r=JSON.parse(t)}catch(e){r=[]}let n=r.findIndex(t=>t.id===e.id);n>=0?r[n].quantity+=1:r.push({id:e.id,name:e.name,planName:e.recurringPeriod?"".concat(e.recurringPeriod," Plan"):"One-time",planId:"",billingPeriod:e.recurringPeriod||"ONE_TIME",amount:e.salesPrice||0,quantity:1}),localStorage.setItem("portal_cart",JSON.stringify(r)),f({type:"success",message:"".concat(e.name," added to cart!")}),setTimeout(()=>f(null),2e3)};return(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),b&&(0,n.jsx)("div",{className:"fixed top-4 right-4 z-50 px-4 py-3 rounded-lg text-sm shadow-lg ".concat("success"===b.type?"bg-green-50 text-green-700 border border-green-200":"bg-red-50 text-red-700 border border-red-200"),children:b.message}),(0,n.jsxs)("div",{className:"flex flex-wrap gap-3",children:[(0,n.jsx)("input",{type:"text",placeholder:"Search products...",value:c,onChange:e=>i(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none w-64"}),p.length>0&&(0,n.jsxs)("select",{value:d,onChange:e=>l(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[(0,n.jsx)("option",{value:"",children:"All Types"}),p.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),y.length>0&&(0,n.jsxs)("select",{value:u,onChange:e=>g(e.target.value),className:"px-4 py-2 rounded-lg border border-gray-200 text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[(0,n.jsx)("option",{value:"",children:"All Categories"}),y.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),r?(0,n.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,n.jsx)("div",{className:"w-8 h-8 border-3 border-blue-200 border-t-blue-600 rounded-full animate-spin"})}):0===e.length?(0,n.jsx)("div",{className:"text-center py-20 text-gray-400",children:"No products found."}):(0,n.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-5",children:e.map(e=>{var t,r;return(0,n.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden hover:shadow-md transition-shadow flex flex-col",children:[(0,n.jsxs)("div",{className:"p-5 flex-1",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),e.category&&(0,n.jsx)("span",{className:"inline-block mt-1 px-2 py-0.5 bg-gray-100 text-gray-600 rounded text-xs",children:e.category})]}),(0,n.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat("Service"===e.productType?"bg-blue-50 text-blue-700":"Digital"===e.productType?"bg-purple-50 text-purple-700":"bg-amber-50 text-amber-700"),children:e.productType})]}),e.description&&(0,n.jsx)("p",{className:"text-sm text-gray-500 mb-4 line-clamp-2",children:e.description}),(0,n.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,n.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["₹",Number(e.salesPrice).toLocaleString("en-IN")]}),e.recurringPrice&&(0,n.jsxs)("span",{className:"text-sm text-gray-500",children:["+ ₹",Number(e.recurringPrice).toLocaleString("en-IN"),"/",(null===(t=e.recurringPeriod)||void 0===t?void 0:t.toLowerCase())||"mo"]})]})]}),(null===(r=e.variants)||void 0===r?void 0:r.length)>0&&(0,n.jsxs)("div",{className:"px-5 pb-3",children:[(0,n.jsx)("p",{className:"text-xs font-medium text-gray-500 uppercase mb-2",children:"Variants"}),(0,n.jsx)("div",{className:"flex flex-wrap gap-2",children:e.variants.map(e=>(0,n.jsxs)("span",{className:"px-2 py-1 bg-gray-50 border border-gray-200 rounded text-xs text-gray-700",children:[e.attribute,": ",e.value,e.extraPrice>0&&" (+₹".concat(Number(e.extraPrice).toLocaleString("en-IN"),")")]},e.id))})]}),(0,n.jsx)("div",{className:"px-5 pb-5 pt-2",children:(0,n.jsxs)("button",{onClick:()=>x(e),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[(0,n.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 100 4 2 2 0 000-4z"})}),"Add to Cart"]})})]},e.id)})})]})}},9116:function(e,t,r){"use strict";r.d(t,{Co:function(){return u},F3:function(){return l},JG:function(){return T},PR:function(){return s},QB:function(){return y},QZ:function(){return O},TL:function(){return h},TV:function(){return g},_g:function(){return x},av:function(){return c},ax:function(){return S},g6:function(){return p},gy:function(){return a},h3:function(){return f},iV:function(){return m},kv:function(){return d},o4:function(){return o},rW:function(){return b},tQ:function(){return v},xf:function(){return N}});let n=()=>localStorage.getItem("token"),o=e=>{localStorage.setItem("token",e)},a=()=>{localStorage.removeItem("token"),localStorage.removeItem("user")},s=()=>{{let e=localStorage.getItem("user");return e?JSON.parse(e):null}},c=e=>{localStorage.setItem("user",JSON.stringify(e))},i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n(),o={"Content-Type":"application/json",...r&&{Authorization:"Bearer ".concat(r)},...t.headers},a=await fetch("".concat("http://localhost:5001/api").concat(e),{...t,headers:o});if(!a.ok)throw Error((await a.json().catch(()=>({error:"Request failed"}))).error||"Request failed");return a.json()},d={signup:e=>i("/auth/signup",{method:"POST",body:JSON.stringify(e)}),login:e=>i("/auth/login",{method:"POST",body:JSON.stringify(e)}),requestPasswordReset:e=>i("/auth/reset-password-request",{method:"POST",body:JSON.stringify({email:e})}),resetPassword:(e,t)=>i("/auth/reset-password",{method:"POST",body:JSON.stringify({token:e,newPassword:t})}),getCurrentUser:()=>i("/auth/me")},l={getAll:()=>i("/products"),getOne:e=>i("/products/".concat(e)),create:e=>i("/products",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/products/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/products/".concat(e),{method:"DELETE"}),addVariant:(e,t)=>i("/products/".concat(e,"/variants"),{method:"POST",body:JSON.stringify(t)}),getVariants:e=>i("/products/".concat(e,"/variants")),updateVariant:(e,t,r)=>i("/products/".concat(e,"/variants/").concat(t),{method:"PUT",body:JSON.stringify(r)}),deleteVariant:(e,t)=>i("/products/".concat(e,"/variants/").concat(t),{method:"DELETE"}),getAttributeLines:e=>i("/products/".concat(e,"/attributes")),addAttributeLine:(e,t)=>i("/products/".concat(e,"/attributes"),{method:"POST",body:JSON.stringify(t)}),deleteAttributeLine:(e,t)=>i("/products/".concat(e,"/attributes/").concat(t),{method:"DELETE"})},u={getAll:()=>i("/plans"),getOne:e=>i("/plans/".concat(e)),create:e=>i("/plans",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/plans/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/plans/".concat(e),{method:"DELETE"})},g={getAll:()=>i("/subscriptions"),getOne:e=>i("/subscriptions/".concat(e)),create:e=>i("/subscriptions",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/subscriptions/".concat(e),{method:"PUT",body:JSON.stringify(t)}),updateStatus:(e,t)=>i("/subscriptions/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:t})}),addLine:(e,t)=>i("/subscriptions/".concat(e,"/lines"),{method:"POST",body:JSON.stringify(t)}),delete:e=>i("/subscriptions/".concat(e),{method:"DELETE"}),deleteLine:(e,t)=>i("/subscriptions/".concat(e,"/lines/").concat(t),{method:"DELETE"}),renew:e=>i("/subscriptions/".concat(e,"/renew"),{method:"POST"}),upsell:(e,t)=>i("/subscriptions/".concat(e,"/upsell"),{method:"POST",body:JSON.stringify({additionalLines:t})}),getHistory:e=>i("/subscriptions/".concat(e,"/history"))},p={getAll:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return t})).toString():"";return i("/invoices".concat(t))},getOne:e=>i("/invoices/".concat(e)),generate:(e,t)=>i("/invoices/generate/".concat(e),{method:"POST",body:t?JSON.stringify(t):void 0}),update:(e,t)=>i("/invoices/".concat(e),{method:"PUT",body:JSON.stringify(t)}),confirm:e=>i("/invoices/".concat(e,"/confirm"),{method:"PUT"}),cancel:e=>i("/invoices/".concat(e,"/cancel"),{method:"PUT"}),addLine:(e,t)=>i("/invoices/".concat(e,"/lines"),{method:"POST",body:JSON.stringify(t)}),deleteLine:(e,t)=>i("/invoices/".concat(e,"/lines/").concat(t),{method:"DELETE"})},m={getAll:()=>i("/payments"),getOne:e=>i("/payments/".concat(e)),create:e=>i("/payments",{method:"POST",body:JSON.stringify(e)})},y={getAll:()=>i("/taxes"),getOne:e=>i("/taxes/".concat(e)),create:e=>i("/taxes",{method:"POST",body:JSON.stringify(e)}),suggest:e=>i("/taxes/suggest",{method:"POST",body:JSON.stringify(e)}),calculate:e=>i("/taxes/calculate",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/taxes/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/taxes/".concat(e),{method:"DELETE"})},h={getAll:()=>i("/discounts"),getOne:e=>i("/discounts/".concat(e)),create:e=>i("/discounts",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/discounts/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/discounts/".concat(e),{method:"DELETE"})},b={getAll:()=>i("/quotations"),getOne:e=>i("/quotations/".concat(e)),create:e=>i("/quotations",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/quotations/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/quotations/".concat(e),{method:"DELETE"}),addLine:(e,t)=>i("/quotations/".concat(e,"/lines"),{method:"POST",body:JSON.stringify(t)}),updateLine:(e,t,r)=>i("/quotations/".concat(e,"/lines/").concat(t),{method:"PUT",body:JSON.stringify(r)}),deleteLine:(e,t)=>i("/quotations/".concat(e,"/lines/").concat(t),{method:"DELETE"}),createSubscription:(e,t)=>i("/quotations/".concat(e,"/create-subscription"),{method:"POST",body:JSON.stringify(t)})},f={getAll:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return t})).toString():"";return i("/users".concat(t))},getOne:e=>i("/users/".concat(e)),createInternal:e=>i("/users/internal",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/users/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/users/".concat(e),{method:"DELETE"}),changeRole:(e,t)=>i("/users/".concat(e,"/role"),{method:"PUT",body:JSON.stringify({role:t})})},S={getDashboard:()=>i("/reports/dashboard"),getSubscriptions:()=>i("/reports/subscriptions"),getRevenue:()=>i("/reports/revenue"),getPayments:()=>i("/reports/payments"),getOverdueInvoices:()=>i("/reports/overdue-invoices")},x={createOrder:e=>i("/razorpay/create-order",{method:"POST",body:JSON.stringify({subscriptionId:e})}),verifyPayment:e=>i("/razorpay/verify-payment",{method:"POST",body:JSON.stringify(e)})},O={getAll:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return void 0!==t})).toString():"";return i("/contacts".concat(t))},getOne:e=>i("/contacts/".concat(e)),create:e=>i("/contacts",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/contacts/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/contacts/".concat(e),{method:"DELETE"}),getChildren:e=>i("/contacts/".concat(e,"/children"))},N={getAll:()=>i("/attributes"),getOne:e=>i("/attributes/".concat(e)),create:e=>i("/attributes",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>i("/attributes/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>i("/attributes/".concat(e),{method:"DELETE"}),addValue:(e,t)=>i("/attributes/".concat(e,"/values"),{method:"POST",body:JSON.stringify(t)}),updateValue:(e,t,r)=>i("/attributes/".concat(e,"/values/").concat(t),{method:"PUT",body:JSON.stringify(r)}),deleteValue:(e,t)=>i("/attributes/".concat(e,"/values/").concat(t),{method:"DELETE"})},v={generateInvoice:e=>i("/pdf/invoice/".concat(e),{method:"POST"}),generateQuotation:e=>i("/pdf/quotation/".concat(e),{method:"POST"})},T={getDashboard:()=>i("/portal/dashboard"),getCatalog:e=>{let t=e?"?"+new URLSearchParams(Object.entries(e).filter(e=>{let[,t]=e;return t})).toString():"";return i("/portal/catalog".concat(t))},getSubscriptions:()=>i("/portal/subscriptions"),getSubscription:e=>i("/portal/subscriptions/".concat(e)),getInvoices:()=>i("/portal/invoices"),getInvoice:e=>i("/portal/invoices/".concat(e)),getPayments:()=>i("/portal/payments"),getProfile:()=>i("/portal/profile"),updateProfile:e=>i("/portal/profile",{method:"PUT",body:JSON.stringify(e)}),subscribe:e=>i("/portal/subscribe",{method:"POST",body:JSON.stringify({planId:e})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=1758)}),_N_E=e.O()}]);