(()=>{var e={};e.id=972,e.ids=[972],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7122:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>d.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>m,tree:()=>o}),s(8020),s(8032),s(5866),s(6835);var a=s(3191),r=s(8716),n=s(7922),d=s.n(n),i=s(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);s.d(t,l);let o=["",{children:["(dashboard)",{children:["invoices",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8020)),"E:\\frontend\\app\\(dashboard)\\invoices\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8032)),"E:\\frontend\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,6835)),"E:\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\frontend\\app\\(dashboard)\\invoices\\page.tsx"],x="/(dashboard)/invoices/page",u={require:s,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/invoices/page",pathname:"/invoices",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},3874:(e,t,s)=>{Promise.resolve().then(s.bind(s,1857))},1857:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var a=s(326),r=s(7577),n=s(5047);s(6824);var d=s(9052),i=s(2980),l=s(2948);function o(){let[e,t]=(0,r.useState)([]),[s,o]=(0,r.useState)(!0),[c,x]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),h=(0,n.useRouter)(),{showToast:p}=(0,l.p)(),j=e.filter(e=>{let t=!c||e.invoiceNumber.toLowerCase().includes(c.toLowerCase())||e.customer?.name?.toLowerCase().includes(c.toLowerCase()),s=!u||e.status===u;return t&&s}),g=e=>"CANCELLED"!==e.status&&"PAID"!==e.status&&!!e.dueDate&&new Date(e.dueDate)<new Date&&e.paidAmount<e.totalAmount,v={total:e.length,draft:e.filter(e=>"DRAFT"===e.status).length,confirmed:e.filter(e=>"CONFIRMED"===e.status).length,paid:e.filter(e=>"PAID"===e.status).length,overdue:e.filter(e=>g(e)).length,totalAmount:e.reduce((e,t)=>e+Number(t.totalAmount||0),0),totalPaid:e.reduce((e,t)=>e+Number(t.paidAmount||0),0)};return s?a.jsx(i.Z,{message:"Loading invoices..."}):(0,a.jsxs)("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Invoices"})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"card p-4",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Invoices"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:v.total})]}),(0,a.jsxs)("div",{className:"card p-4",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Amount"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["₹",v.totalAmount.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"card p-4",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Total Collected"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-emerald-600",children:["₹",v.totalPaid.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"card p-4",children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Overdue"}),a.jsx("p",{className:`text-2xl font-bold ${v.overdue>0?"text-red-600":"text-gray-900"}`,children:v.overdue})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"text",placeholder:"Search by invoice # or customer...",value:c,onChange:e=>x(e.target.value),className:"form-input flex-1"}),(0,a.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"form-select w-40",children:[a.jsx("option",{value:"",children:"All Status"}),a.jsx("option",{value:"DRAFT",children:"Draft"}),a.jsx("option",{value:"CONFIRMED",children:"Confirmed"}),a.jsx("option",{value:"PAID",children:"Paid"}),a.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),a.jsx("div",{className:"table-container",children:(0,a.jsxs)("table",{className:"data-table",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{children:"Invoice #"}),a.jsx("th",{children:"Customer"}),a.jsx("th",{children:"Subscription"}),a.jsx("th",{children:"Date"}),a.jsx("th",{children:"Due Date"}),a.jsx("th",{children:"Total"}),a.jsx("th",{children:"Paid"}),a.jsx("th",{children:"Balance"}),a.jsx("th",{children:"Status"}),a.jsx("th",{children:"Actions"})]})}),(0,a.jsxs)("tbody",{children:[j.map(e=>{let t=Number(e.totalAmount)-Number(e.paidAmount),s=g(e);return(0,a.jsxs)("tr",{className:s?"bg-red-50":"",children:[a.jsx("td",{className:"font-medium text-gray-900 font-mono text-sm",children:e.invoiceNumber}),a.jsx("td",{children:e.customer?.name||"-"}),a.jsx("td",{className:"font-mono text-xs text-gray-500",children:e.subscription?.subscriptionNumber||"-"}),a.jsx("td",{children:new Date(e.invoiceDate).toLocaleDateString()}),(0,a.jsxs)("td",{children:[a.jsx("span",{className:s?"text-red-600 font-medium":"",children:e.dueDate?new Date(e.dueDate).toLocaleDateString():"-"}),s&&a.jsx("span",{className:"ml-1 text-xs text-red-500 font-medium",children:"OVERDUE"})]}),(0,a.jsxs)("td",{className:"font-medium",children:["₹",Number(e.totalAmount).toFixed(2)]}),(0,a.jsxs)("td",{className:"text-emerald-600 font-medium",children:["₹",Number(e.paidAmount).toFixed(2)]}),(0,a.jsxs)("td",{className:`font-medium ${t>0?"text-red-600":"text-emerald-600"}`,children:["₹",t.toFixed(2)]}),a.jsx("td",{children:a.jsx(d.Z,{status:e.status})}),a.jsx("td",{children:a.jsx("button",{onClick:()=>h.push(`/invoices/${e.id}`),className:"btn-secondary btn-sm",children:"View"})})]},e.id)}),0===j.length&&a.jsx("tr",{children:a.jsx("td",{colSpan:10,className:"text-center py-8 text-gray-500",children:"No invoices found."})})]})]})})]})}},9052:(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s(326);let r={DRAFT:"badge-draft",QUOTATION:"badge-quotation",CONFIRMED:"badge-confirmed",ACTIVE:"badge-active",PAID:"badge-paid",CLOSED:"badge-closed",CANCELLED:"badge-cancelled"};function n({status:e}){let t=r[e]||"badge-draft";return a.jsx("span",{className:t,children:e.replace("_"," ")})}},8020:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`E:\frontend\app\(dashboard)\invoices\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[697,496,315,78],()=>s(7122));module.exports=a})();