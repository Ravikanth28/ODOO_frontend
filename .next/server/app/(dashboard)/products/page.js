(()=>{var e={};e.id=393,e.ids=[393],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1838:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>m,tree:()=>d}),r(3954),r(8032),r(5866),r(6835);var s=r(3191),a=r(8716),i=r(7922),l=r.n(i),n=r(5231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);r.d(t,c);let d=["",{children:["(dashboard)",{children:["products",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3954)),"E:\\frontend\\app\\(dashboard)\\products\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8032)),"E:\\frontend\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,6835)),"E:\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],o=["E:\\frontend\\app\\(dashboard)\\products\\page.tsx"],u="/(dashboard)/products/page",x={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/(dashboard)/products/page",pathname:"/products",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7661:(e,t,r)=>{Promise.resolve().then(r.bind(r,8709))},8709:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(326),a=r(7577),i=r(6824),l=r(3594),n=r(7698),c=r(2980),d=r(2948);function o(){let[e,t]=(0,a.useState)([]),[r,o]=(0,a.useState)([]),[u,x]=(0,a.useState)(!0),[m,p]=(0,a.useState)(""),[h,g]=(0,a.useState)(""),[b,j]=(0,a.useState)(""),[v,y]=(0,a.useState)(!1),[f,N]=(0,a.useState)(null),[P,w]=(0,a.useState)(null),[C,k]=(0,a.useState)(!1),[S,L]=(0,a.useState)(!1),[A,F]=(0,a.useState)(null),[E,V]=(0,a.useState)({attribute:"",value:"",extraPrice:"0"}),[I,_]=(0,a.useState)(!1),[M,T]=(0,a.useState)({attributeId:"",attributeValueId:""}),[q,D]=(0,a.useState)(!1),[Y,R]=(0,a.useState)({name:"",description:"",productType:"Service",salesPrice:"",costPrice:"",recurringPrice:"",recurringPeriod:"",category:""}),{showToast:W}=(0,d.p)(),B=(0,i.PR)(),O=B?.role==="ADMIN",$=async()=>{try{let e=await i.F3.getAll();t(e)}catch(e){W(e.message||"Failed to load products","error")}finally{x(!1)}},Z=e=>{N(e),R({name:e.name,description:e.description||"",productType:e.productType,salesPrice:String(e.salesPrice),costPrice:String(e.costPrice),recurringPrice:e.recurringPrice?String(e.recurringPrice):"",recurringPeriod:e.recurringPeriod||"",category:e.category||""}),y(!0)},G=async()=>{if(!Y.name||!Y.salesPrice||!Y.costPrice){W("Name, sales price, and cost price are required","error");return}k(!0);try{let e={...Y,salesPrice:parseFloat(Y.salesPrice),costPrice:parseFloat(Y.costPrice),recurringPrice:Y.recurringPrice?parseFloat(Y.recurringPrice):null,recurringPeriod:Y.recurringPeriod||null,category:Y.category||null};f?(await i.F3.update(f.id,e),W("Product updated","success")):(await i.F3.create(e),W("Product created","success")),y(!1),$()}catch(e){W(e.message||"Failed to save product","error")}finally{k(!1)}},H=async()=>{if(P){L(!0);try{await i.F3.delete(P.id),W("Product deleted","success"),w(null),A===P.id&&F(null),$()}catch(e){W(e.message||"Failed to delete product","error")}finally{L(!1)}}},z=async e=>{if(!E.attribute||!E.value){W("Attribute and value are required","error");return}_(!0);try{await i.F3.addVariant(e,E),W("Variant added","success"),V({attribute:"",value:"",extraPrice:"0"}),$()}catch(e){W(e.message||"Failed to add variant","error")}finally{_(!1)}},K=async(e,t)=>{try{await i.F3.deleteVariant(e,t),W("Variant removed","success"),$()}catch(e){W(e.message||"Failed to delete variant","error")}},U=async e=>{if(!M.attributeId||!M.attributeValueId){W("Select an attribute and value","error");return}D(!0);try{await i.F3.addAttributeLine(e,M),W("Attribute linked","success"),T({attributeId:"",attributeValueId:""}),$()}catch(e){W(e.message||"Failed to link attribute","error")}finally{D(!1)}},X=async(e,t)=>{try{await i.F3.deleteAttributeLine(e,t),W("Attribute removed","success"),$()}catch(e){W(e.message||"Failed to remove attribute","error")}},J=M.attributeId&&r.find(e=>e.id===M.attributeId)?.values||[],Q=Array.from(new Set(e.map(e=>e.category).filter(Boolean))),ee=e.filter(e=>{let t=!m||e.name.toLowerCase().includes(m.toLowerCase())||(e.description||"").toLowerCase().includes(m.toLowerCase()),r=!h||e.productType===h,s=!b||e.category===b;return t&&r&&s});if(u)return s.jsx(c.Z,{message:"Loading products..."});let et=e=>s.jsx("span",{className:{Service:"badge-active",Physical:"badge-confirmed",Digital:"badge-quotation"}[e]||"badge-draft",children:e}),er={DAILY:"/day",WEEKLY:"/week",MONTHLY:"/month",YEARLY:"/year"};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Products"}),O&&(0,s.jsxs)("button",{onClick:()=>{N(null),R({name:"",description:"",productType:"Service",salesPrice:"",costPrice:"",recurringPrice:"",recurringPeriod:"",category:""}),y(!0)},className:"btn-primary",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Product"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("input",{type:"text",placeholder:"Search products...",value:m,onChange:e=>p(e.target.value),className:"form-input flex-1"}),(0,s.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"form-select w-40",children:[s.jsx("option",{value:"",children:"All Types"}),s.jsx("option",{value:"Service",children:"Service"}),s.jsx("option",{value:"Physical",children:"Physical"}),s.jsx("option",{value:"Digital",children:"Digital"})]}),Q.length>0&&(0,s.jsxs)("select",{value:b,onChange:e=>j(e.target.value),className:"form-select w-40",children:[s.jsx("option",{value:"",children:"All Categories"}),Q.map(e=>s.jsx("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[ee.map(e=>(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50",onClick:()=>F(A===e.id?null:e.id),children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[s.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${A===e.id?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium text-gray-900",children:e.name}),et(e.productType),e.category&&s.jsx("span",{className:"badge bg-gray-100 text-gray-600",children:e.category})]}),e.description&&s.jsx("p",{className:"text-sm text-gray-500 truncate mt-0.5",children:e.description})]}),(0,s.jsxs)("div",{className:"flex items-center gap-6 text-sm",children:[(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("p",{className:"text-gray-500",children:"Sales Price"}),(0,s.jsxs)("p",{className:"font-semibold text-gray-900",children:["₹",Number(e.salesPrice).toFixed(2)]})]}),e.recurringPrice&&(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("p",{className:"text-gray-500",children:"Recurring"}),(0,s.jsxs)("p",{className:"font-semibold text-emerald-600",children:["₹",Number(e.recurringPrice).toFixed(2),s.jsx("span",{className:"text-xs font-normal text-gray-500",children:er[e.recurringPeriod]||""})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("p",{className:"text-gray-500",children:"Cost"}),(0,s.jsxs)("p",{className:"font-medium text-gray-700",children:["₹",Number(e.costPrice).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500",children:"Variants"}),s.jsx("p",{className:"font-medium",children:e.variants?.length||0})]}),(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("p",{className:"text-gray-500",children:"Attributes"}),s.jsx("p",{className:"font-medium",children:e.attributes?.length||0})]})]})]}),O&&(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-4",onClick:e=>e.stopPropagation(),children:[s.jsx("button",{onClick:()=>Z(e),className:"btn-secondary btn-sm",children:"Edit"}),s.jsx("button",{onClick:()=>w(e),className:"btn-danger btn-sm",children:"Delete"})]})]}),A===e.id&&(0,s.jsxs)("div",{className:"border-t border-gray-200 p-4 space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Variants"}),(0,s.jsxs)("div",{className:"space-y-1",children:[e.variants?.map(t=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"font-medium text-gray-700",children:t.attribute}),s.jsx("span",{className:"text-gray-400",children:"→"}),s.jsx("span",{className:"text-gray-900",children:t.value}),t.extraPrice>0&&s.jsxs("span",{className:"text-emerald-600 text-xs",children:["+","₹",Number(t.extraPrice).toFixed(2)]})]}),O&&s.jsx("button",{onClick:()=>K(e.id,t.id),className:"text-red-500 hover:text-red-700 text-xs",children:"Remove"})]},t.id)),(!e.variants||0===e.variants.length)&&s.jsx("p",{className:"text-sm text-gray-500",children:"No variants yet."})]}),O&&(0,s.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-100 flex items-end gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",placeholder:"Attribute (e.g. Color)",value:E.attribute,onChange:e=>V({...E,attribute:e.target.value}),className:"form-input text-sm"})}),s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",placeholder:"Value (e.g. Red)",value:E.value,onChange:e=>V({...E,value:e.target.value}),className:"form-input text-sm"})}),s.jsx("div",{className:"w-28",children:s.jsx("input",{type:"number",step:"0.01",placeholder:"Extra price",value:E.extraPrice,onChange:e=>V({...E,extraPrice:e.target.value}),className:"form-input text-sm"})}),s.jsx("button",{onClick:()=>z(e.id),disabled:I,className:"btn-primary btn-sm",children:I?"...":"Add"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Linked Attributes"}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[e.attributes?.map(t=>s.jsxs("div",{className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-blue-50 text-blue-800 rounded-full text-sm",children:[s.jsxs("span",{className:"font-medium",children:[t.attribute?.name,":"]}),s.jsx("span",{children:t.attributeValue?.value}),t.attributeValue?.extraPrice>0&&s.jsxs("span",{className:"text-blue-500 text-xs",children:["+","₹",t.attributeValue.extraPrice]}),O&&s.jsx("button",{onClick:()=>X(e.id,t.id),className:"ml-1 text-blue-400 hover:text-red-500",children:s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},t.id)),(!e.attributes||0===e.attributes.length)&&s.jsx("p",{className:"text-sm text-gray-500",children:"No attributes linked."})]}),O&&r.length>0&&(0,s.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-100 flex items-end gap-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("label",{className:"form-label text-xs",children:"Attribute"}),(0,s.jsxs)("select",{value:M.attributeId,onChange:e=>T({attributeId:e.target.value,attributeValueId:""}),className:"form-select text-sm",children:[s.jsx("option",{value:"",children:"Select Attribute"}),r.map(e=>s.jsx("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("label",{className:"form-label text-xs",children:"Value"}),(0,s.jsxs)("select",{value:M.attributeValueId,onChange:e=>T({...M,attributeValueId:e.target.value}),className:"form-select text-sm",disabled:!M.attributeId,children:[s.jsx("option",{value:"",children:"Select Value"}),J.map(e=>(0,s.jsxs)("option",{value:e.id,children:[e.value," ",e.extraPrice>0?`(+₹${e.extraPrice})`:""]},e.id))]})]}),s.jsx("button",{onClick:()=>U(e.id),disabled:q,className:"btn-primary btn-sm",children:q?"...":"Link"})]})]})]})]},e.id)),0===ee.length&&s.jsx("div",{className:"card p-8 text-center text-gray-500",children:"No products found."})]}),s.jsx(l.Z,{isOpen:v,onClose:()=>y(!1),title:f?"Edit Product":"New Product",onSubmit:G,submitLabel:f?"Update":"Create",loading:C,children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"col-span-2",children:[s.jsx("label",{className:"form-label",children:"Product Name *"}),s.jsx("input",{type:"text",required:!0,value:Y.name,onChange:e=>R({...Y,name:e.target.value}),className:"form-input",placeholder:"Enter product name"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"form-label",children:"Product Type"}),(0,s.jsxs)("select",{value:Y.productType,onChange:e=>R({...Y,productType:e.target.value}),className:"form-select",children:[s.jsx("option",{value:"Service",children:"Service"}),s.jsx("option",{value:"Physical",children:"Physical"}),s.jsx("option",{value:"Digital",children:"Digital"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"form-label",children:"Category"}),s.jsx("input",{type:"text",value:Y.category,onChange:e=>R({...Y,category:e.target.value}),className:"form-input",placeholder:"e.g. Software, Hardware"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"form-label",children:"Sales Price *"}),s.jsx("input",{type:"number",required:!0,step:"0.01",value:Y.salesPrice,onChange:e=>R({...Y,salesPrice:e.target.value}),className:"form-input",placeholder:"0.00"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"form-label",children:"Cost Price *"}),s.jsx("input",{type:"number",required:!0,step:"0.01",value:Y.costPrice,onChange:e=>R({...Y,costPrice:e.target.value}),className:"form-input",placeholder:"0.00"})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Recurring Pricing (Optional)"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"form-label",children:"Recurring Price"}),s.jsx("input",{type:"number",step:"0.01",value:Y.recurringPrice,onChange:e=>R({...Y,recurringPrice:e.target.value}),className:"form-input",placeholder:"0.00"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"form-label",children:"Billing Period"}),(0,s.jsxs)("select",{value:Y.recurringPeriod,onChange:e=>R({...Y,recurringPeriod:e.target.value}),className:"form-select",children:[s.jsx("option",{value:"",children:"None"}),s.jsx("option",{value:"DAILY",children:"Daily"}),s.jsx("option",{value:"WEEKLY",children:"Weekly"}),s.jsx("option",{value:"MONTHLY",children:"Monthly"}),s.jsx("option",{value:"YEARLY",children:"Yearly"})]})]})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"form-label",children:"Description"}),s.jsx("textarea",{value:Y.description,onChange:e=>R({...Y,description:e.target.value}),className:"form-textarea",rows:3,placeholder:"Product description (optional)"})]})]})}),s.jsx(n.Z,{isOpen:!!P,onConfirm:H,onCancel:()=>w(null),title:"Delete Product",message:`Are you sure you want to delete "${P?.name}"? This action cannot be undone.`,confirmLabel:"Delete",variant:"danger",loading:S})]})}},7698:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(326);function a({isOpen:e,onConfirm:t,onCancel:r,title:a,message:i,confirmLabel:l="Confirm",variant:n="danger",loading:c=!1}){return e?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"fixed inset-0 bg-black/40",onClick:r}),(0,s.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-sm mx-4 p-6",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${"danger"===n?"bg-red-100":"bg-yellow-100"}`,children:s.jsx("svg",{className:`w-5 h-5 ${"danger"===n?"text-red-600":"text-yellow-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsx("button",{onClick:r,className:"btn-secondary",children:"Cancel"}),s.jsx("button",{onClick:t,disabled:c,className:"danger"===n?"btn-danger":"btn-primary",children:c?"Processing...":l})]})]})]}):null}},3594:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(326);function a({isOpen:e,onClose:t,title:r,children:a,onSubmit:i,submitLabel:l="Save",loading:n=!1,size:c="md"}){return e?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"fixed inset-0 bg-black/40",onClick:t}),(0,s.jsxs)("div",{className:`relative bg-white rounded-lg shadow-xl w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl"}[c]} mx-4 max-h-[90vh] flex flex-col`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"px-6 py-4 overflow-y-auto flex-1",children:a}),i&&(0,s.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:[s.jsx("button",{type:"button",onClick:t,className:"btn-secondary",children:"Cancel"}),s.jsx("button",{type:"button",onClick:i,disabled:n,className:"btn-primary",children:n?"Saving...":l})]})]})]}):null}r(7577)},3954:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(8570).createProxy)(String.raw`E:\frontend\app\(dashboard)\products\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[697,496,315,78],()=>r(1838));module.exports=s})();