(()=>{var e={};e.id=652,e.ids=[652],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2984:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o}),a(4334),a(8032),a(5866),a(6835);var s=a(3191),r=a(8716),l=a(7922),n=a.n(l),i=a(5231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);a.d(t,d);let o=["",{children:["(dashboard)",{children:["attributes",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,4334)),"E:\\frontend\\app\\(dashboard)\\attributes\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,8032)),"E:\\frontend\\app\\(dashboard)\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,6835)),"E:\\frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["E:\\frontend\\app\\(dashboard)\\attributes\\page.tsx"],u="/(dashboard)/attributes/page",x={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/(dashboard)/attributes/page",pathname:"/attributes",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},597:(e,t,a)=>{Promise.resolve().then(a.bind(a,5271))},5271:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var s=a(326),r=a(7577),l=a(6824),n=a(3594),i=a(7698),d=a(2980),o=a(2948);function c(){let[e,t]=(0,r.useState)([]),[a,c]=(0,r.useState)(!0),[u,x]=(0,r.useState)(!1),[m,p]=(0,r.useState)(null),[h,v]=(0,r.useState)(null),[b,g]=(0,r.useState)(!1),[y,f]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),[k,w]=(0,r.useState)({value:"",extraPrice:"0"}),[C,P]=(0,r.useState)(!1),[A,S]=(0,r.useState)({name:"",displayType:"select",values:[{value:"",extraPrice:"0"}]}),{showToast:_}=(0,o.p)(),L=(0,l.PR)(),T=L?.role==="ADMIN",E=async()=>{try{let e=await l.xf.getAll();t(e)}catch(e){_(e.message||"Failed to load attributes","error")}finally{c(!1)}},q=e=>{p(e),S({name:e.name,displayType:e.displayType,values:[]}),x(!0)},M=async()=>{if(!A.name){_("Name is required","error");return}g(!0);try{if(m)await l.xf.update(m.id,{name:A.name,displayType:A.displayType}),_("Attribute updated","success");else{let e=A.values.filter(e=>e.value.trim());await l.xf.create({name:A.name,displayType:A.displayType,values:e.length>0?e:void 0}),_("Attribute created","success")}x(!1),E()}catch(e){_(e.message||"Failed to save attribute","error")}finally{g(!1)}},V=async()=>{if(h){f(!0);try{await l.xf.delete(h.id),_("Attribute deleted","success"),v(null),E()}catch(e){_(e.message||"Failed to delete attribute","error")}finally{f(!1)}}},D=async e=>{if(!k.value.trim()){_("Value is required","error");return}P(!0);try{await l.xf.addValue(e,{value:k.value,extraPrice:k.extraPrice}),_("Value added","success"),w({value:"",extraPrice:"0"}),E()}catch(e){_(e.message||"Failed to add value","error")}finally{P(!1)}},B=async(e,t)=>{try{await l.xf.deleteValue(e,t),_("Value deleted","success"),E()}catch(e){_(e.message||"Failed to delete value","error")}},$=e=>{S({...A,values:A.values.filter((t,a)=>a!==e)})};return a?s.jsx(d.Z,{message:"Loading attributes..."}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Attributes"}),T&&(0,s.jsxs)("button",{onClick:()=>{p(null),S({name:"",displayType:"select",values:[{value:"",extraPrice:"0"}]}),x(!0)},className:"btn-primary",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Attribute"]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[e.map(e=>(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"p-4 flex items-center justify-between cursor-pointer hover:bg-gray-50",onClick:()=>N(j===e.id?null:e.id),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("svg",{className:`w-4 h-4 transition-transform ${j===e.id?"rotate-90":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),s.jsx("span",{className:"font-medium text-gray-900",children:e.name}),s.jsx("span",{className:"badge bg-gray-100 text-gray-600",children:e.displayType}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:[e.values?.length||0," values"]})]}),T&&(0,s.jsxs)("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[s.jsx("button",{onClick:()=>q(e),className:"btn-secondary btn-sm",children:"Edit"}),s.jsx("button",{onClick:()=>v(e),className:"btn-danger btn-sm",children:"Delete"})]})]}),j===e.id&&(0,s.jsxs)("div",{className:"border-t border-gray-200 p-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[e.values?.map(t=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.value}),t.extraPrice>0&&s.jsxs("span",{className:"text-xs text-emerald-600",children:["+","â‚¹",t.extraPrice]})]}),T&&s.jsx("button",{onClick:()=>B(e.id,t.id),className:"text-red-500 hover:text-red-700 text-xs",children:"Remove"})]},t.id)),(!e.values||0===e.values.length)&&s.jsx("p",{className:"text-sm text-gray-500",children:"No values yet."})]}),T&&(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 flex items-end gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx("input",{type:"text",placeholder:"Value name",value:k.value,onChange:e=>w({...k,value:e.target.value}),className:"form-input text-sm"})}),s.jsx("div",{className:"w-28",children:s.jsx("input",{type:"number",step:"0.01",placeholder:"Extra price",value:k.extraPrice,onChange:e=>w({...k,extraPrice:e.target.value}),className:"form-input text-sm"})}),s.jsx("button",{onClick:()=>D(e.id),disabled:C,className:"btn-primary btn-sm",children:C?"...":"Add"})]})]})]},e.id)),0===e.length&&s.jsx("div",{className:"card p-8 text-center text-gray-500",children:"No attributes found. Create one to get started."})]}),s.jsx(n.Z,{isOpen:u,onClose:()=>x(!1),title:m?"Edit Attribute":"Add Attribute",onSubmit:M,submitLabel:m?"Update":"Create",loading:b,children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("label",{className:"form-label",children:"Name *"}),s.jsx("input",{type:"text",required:!0,value:A.name,onChange:e=>S({...A,name:e.target.value}),className:"form-input",placeholder:"e.g., Color, Size, Brand"})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"form-label",children:"Display Type"}),(0,s.jsxs)("select",{value:A.displayType,onChange:e=>S({...A,displayType:e.target.value}),className:"form-select",children:[s.jsx("option",{value:"select",children:"Dropdown"}),s.jsx("option",{value:"radio",children:"Radio Buttons"}),s.jsx("option",{value:"color",children:"Color Swatches"}),s.jsx("option",{value:"pills",children:"Pills"})]})]}),!m&&(0,s.jsxs)("div",{children:[s.jsx("label",{className:"form-label",children:"Initial Values"}),A.values.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("input",{type:"text",placeholder:"Value",value:e.value,onChange:e=>{let a=[...A.values];a[t]={...a[t],value:e.target.value},S({...A,values:a})},className:"form-input flex-1"}),s.jsx("input",{type:"number",step:"0.01",placeholder:"Extra $",value:e.extraPrice,onChange:e=>{let a=[...A.values];a[t]={...a[t],extraPrice:e.target.value},S({...A,values:a})},className:"form-input w-24"}),A.values.length>1&&s.jsx("button",{type:"button",onClick:()=>$(t),className:"text-red-500 hover:text-red-700 text-sm",children:"X"})]},t)),s.jsx("button",{type:"button",onClick:()=>{S({...A,values:[...A.values,{value:"",extraPrice:"0"}]})},className:"text-sm text-primary hover:text-primary-dark",children:"+ Add another value"})]})]})}),s.jsx(i.Z,{isOpen:!!h,onConfirm:V,onCancel:()=>v(null),title:"Delete Attribute",message:`Delete "${h?.name}" and all its values? This cannot be undone.`,confirmLabel:"Delete",variant:"danger",loading:y})]})}},7698:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(326);function r({isOpen:e,onConfirm:t,onCancel:a,title:r,message:l,confirmLabel:n="Confirm",variant:i="danger",loading:d=!1}){return e?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"fixed inset-0 bg-black/40",onClick:a}),(0,s.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-sm mx-4 p-6",children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center ${"danger"===i?"bg-red-100":"bg-yellow-100"}`,children:s.jsx("svg",{className:`w-5 h-5 ${"danger"===i?"text-red-600":"text-yellow-600"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:r}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:l})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[s.jsx("button",{onClick:a,className:"btn-secondary",children:"Cancel"}),s.jsx("button",{onClick:t,disabled:d,className:"danger"===i?"btn-danger":"btn-primary",children:d?"Processing...":n})]})]})]}):null}},3594:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var s=a(326);function r({isOpen:e,onClose:t,title:a,children:r,onSubmit:l,submitLabel:n="Save",loading:i=!1,size:d="md"}){return e?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[s.jsx("div",{className:"fixed inset-0 bg-black/40",onClick:t}),(0,s.jsxs)("div",{className:`relative bg-white rounded-lg shadow-xl w-full ${{sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl"}[d]} mx-4 max-h-[90vh] flex flex-col`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"px-6 py-4 overflow-y-auto flex-1",children:r}),l&&(0,s.jsxs)("div",{className:"flex justify-end gap-3 px-6 py-4 border-t border-gray-200 bg-gray-50 rounded-b-lg",children:[s.jsx("button",{type:"button",onClick:t,className:"btn-secondary",children:"Cancel"}),s.jsx("button",{type:"button",onClick:l,disabled:i,className:"btn-primary",children:i?"Saving...":n})]})]})]}):null}a(7577)},4334:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`E:\frontend\app\(dashboard)\attributes\page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[697,496,315,78],()=>a(2984));module.exports=s})();